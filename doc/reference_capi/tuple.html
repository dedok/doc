




<!doctype html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Module tuple</title>
    <link rel="icon" type="image/png" sizes="192x192"  href="/theme/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/theme/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/theme/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/theme/favicon/favicon-16x16.png">
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.7.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/jquery.pin.min.js"></script>
    <script type="text/javascript" src="../_static/headers.js"></script>
    <link rel="stylesheet" href="/theme/design.css">
    <link rel="stylesheet" href="/theme/pygmentize.css">
    <link rel="stylesheet" href="/theme/font-awesome.min.css">
    <link rel="stylesheet" href="../_static/sphinx_design.css">
     
    <!--[if lt IE 9]>
      <script src="/js/ie8.js"></script>
      <link rel="stylesheet" href="/theme/ie8.css" />
    <![endif]-->
    <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-22120502-1', 'auto');
  ga('send', 'pageview');
</script>

<!-- Rating@Mail.ru counter -->
<script type="text/javascript">
  var _tmr = _tmr || [];
  _tmr.push({id: "2284916", type: "pageView", start: (new Date()).getTime()});
  (function (d, w) {
    var ts = d.createElement("script"); ts.type = "text/javascript"; ts.async = true;
    ts.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//top-fwz1.mail.ru/js/code.js";
    var f = function () {var s = d.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ts, s);};
    if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); }
  })(document, window);
</script>
<noscript>
  <div style="position:absolute;left:-10000px;">
    <img src="//top-fwz1.mail.ru/counter?id=2284916;js=na" style="border:0;"
         height="1" width="1" alt="Рейтинг@Mail.ru" />
  </div>
</noscript>
<!-- //Rating@Mail.ru counter -->


  </head>
  
  <body class="p-cols_design">
  
    <div class="b-wrapper">
      <!-- HEADER > -->
      <header class="b-header">
        <div class="b-header-wrapper">
          <nav class="b-header_menu">
            
  <ul class="b-menu">
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org" class="b-menu-item-url">Overview</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://try.tarantool.org" class="b-menu-item-url">Try</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org/doc/" class="b-menu-item-url p-active">Documentation</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org/download.html" class="b-menu-item-url">Download</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org/careers.html" class="b-menu-item-url">Careers</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://rocks.tarantool.org" class="b-menu-item-url">Rocks</a>
        
      </li>
    
  </ul>

          </nav>
        </div>
      </header>
      <!-- < HEADER -->

      <div class="b-content b-clearbox">
        
  <section class="b-lightgray_block b-documentation_top b-clearbox p-documentation_in">
    <div class="b-block-wrapper">
      <h2 class="b-section-title b-ellipsis" title="Module tuple">
        Module tuple
      </h2>
  <div class="b-doc-language_selector">
    <ul class="b-doc-language_selector-list">
    
      <li class="b-doc-language_selector-item">
      
        <a href="
  
    ../../reference_capi/tuple.html
  
"
           class="b-doc-language_selector-item-url p-active"> En </a>
      
      </li>
    
      <li class="b-doc-language_selector-item">
      
        <a href="
  
    ../ru/reference_capi/tuple.html
  
"
           class="b-doc-language_selector-item-url"> Ru </a>
      
      </li>
    
    </ul>
  </div>
</div>
  </section>
  
    <div class="b-cols_content b-clearbox b-doc-reference_capi/tuple">
      <div class="b-cols_content_left">
        
<form id="searchbox" role="search" class="search b-search" action="../search.html" method="get">
  <input class="b-search-text" name="q" type="text"/ placeholder="Search the manual">
  <input class="b-search-but" type="submit" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>


        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../book/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_lua/index.html">Lua reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_rock/index.html">Lua rocks reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">C API reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="box.html">Module <cite>box</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="clock.html">Module <cite>clock</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="coio.html">Module <cite>coio</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="error.html">Module <cite>error</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="fiber.html">Module <cite>fiber</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="box_index.html">Module <cite>index</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="latch.html">Module <cite>latch</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">Module <cite>lua/utils</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="say.html">Module <cite>say</cite> (logging)</a></li>
<li class="toctree-l2"><a class="reference internal" href="schema.html">Module <cite>schema</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="trivia.html">Module <cite>trivia/config</cite></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Module <cite>tuple</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="txn.html">Module <cite>txn</cite></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/index.html">Contributing</a></li>
</ul>

      </div>
      <div class="b-cols_content_right">
        <div class="b-cols_content_right-slot">
  <div class="b-page_header">
    <ul class="b-path-list">
      <li class="b-path-list-item">
        <a href="../index.html"
           class="b-path-list-item-url">
          Documentation
        </a>
      </li>
      
        <li class="b-path-list-item">
          <a href="index.html"
             class="b-path-list-item-url b-ellipsis">
            C API reference
          </a>
        </li>
      
      
      <li class="b-path-list-item">
        <div title="Module <cite>tuple</cite>" class="b-path_current b-ellipsis">
          Module <cite>tuple</cite>
        </div>
      </li>
      
    </ul>
  </div>

  <div class="section" id="module-tuple">
<h1>Module <cite>tuple</cite><a class="headerlink" href="#module-tuple" title="Permalink to this headline">¶</a></h1>
<dl class="type">
<dt id="c.box_tuple_format_t">
<code class="descname">box_tuple_format_t</code><a class="headerlink" href="#c.box_tuple_format_t" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<span class="target" id="c-api-tuple-box-tuple-format-default"></span><dl class="function">
<dt id="c.box_tuple_format_default">
<a class="reference internal" href="#c.box_tuple_format_t" title="box_tuple_format_t">box_tuple_format_t</a> *<code class="descname">box_tuple_format_default</code><big>(</big>void<big>)</big><a class="headerlink" href="#c.box_tuple_format_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Tuple format.</p>
<p>Each Tuple has associated format (class). Default format is used to
create tuples which are not attach to any particular space.</p>
</dd></dl>

<dl class="type">
<dt id="c.box_tuple_t">
<code class="descname">box_tuple_t</code><a class="headerlink" href="#c.box_tuple_t" title="Permalink to this definition">¶</a></dt>
<dd><p>Tuple</p>
</dd></dl>

<span class="target" id="c-api-tuple-box-tuple-new"></span><dl class="function">
<dt id="c.box_tuple_new">
<a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t">box_tuple_t</a> *<code class="descname">box_tuple_new</code><big>(</big><a class="reference internal" href="#c.box_tuple_format_t" title="box_tuple_format_t">box_tuple_format_t</a><em>&nbsp;*format</em>, const char<em>&nbsp;*tuple</em>, const char<em>&nbsp;*tuple_end</em><big>)</big><a class="headerlink" href="#c.box_tuple_new" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocate and initialize a new tuple from a raw MsgPack Array data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>format</strong> (<a class="reference internal" href="#c.box_tuple_format_t" title="box_tuple_format_t"><em>box_tuple_format_t*</em></a>) -- tuple format. Use
<a class="reference internal" href="#c-api-tuple-box-tuple-format-default"><span class="std std-ref">box_tuple_format_default()</span></a>
to create space-independent tuple.</li>
<li><strong>char*          tuple</strong> (<em>const</em>) -- tuple data in MsgPack Array format ([field1, field2, ...])</li>
<li><strong>char*      tuple_end</strong> (<em>const</em>) -- the end of <code class="docutils literal"><span class="pre">data</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">NULL on out of memory</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">tuple otherwise</p>
</td>
</tr>
</tbody>
</table>
<p>See also: <a class="reference internal" href="../book/box/box_tuple.html#box-tuple-new"><span class="std std-ref">box.tuple.new()</span></a></p>
</dd></dl>

<span class="target" id="c-api-tuple-box-tuple-ref"></span><dl class="function">
<dt id="c.box_tuple_ref">
int <code class="descname">box_tuple_ref</code><big>(</big><a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t">box_tuple_t</a><em>&nbsp;*tuple</em><big>)</big><a class="headerlink" href="#c.box_tuple_ref" title="Permalink to this definition">¶</a></dt>
<dd><p>Increase the reference counter of tuple.</p>
<p>Tuples are reference counted. All functions that return tuples guarantee
that the last returned tuple is refcounted internally until the next
call to API function that yields or returns another tuple.</p>
<p>You should increase the reference counter before taking tuples for long
processing in your code. Such tuples will not be garbage collected even
if another fiber remove they from space. After processing please
decrement the reference counter using
<a class="reference internal" href="#c-api-tuple-box-tuple-unref"><span class="std std-ref">box_tuple_unref()</span></a>,
otherwise the tuple will leak.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tuple</strong> (<a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t"><em>box_tuple_t*</em></a>) -- a tuple</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">-1 on error</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">0 otherwise</p>
</td>
</tr>
</tbody>
</table>
<p>See also: <a class="reference internal" href="#c-api-tuple-box-tuple-unref"><span class="std std-ref">box_tuple_unref()</span></a></p>
</dd></dl>

<span class="target" id="c-api-tuple-box-tuple-unref"></span><dl class="function">
<dt id="c.box_tuple_unref">
void <code class="descname">box_tuple_unref</code><big>(</big><a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t">box_tuple_t</a><em>&nbsp;*tuple</em><big>)</big><a class="headerlink" href="#c.box_tuple_unref" title="Permalink to this definition">¶</a></dt>
<dd><p>Decrease the reference counter of tuple.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tuple</strong> (<a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t"><em>box_tuple_t*</em></a>) -- a tuple</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">-1 on error</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">0 otherwise</p>
</td>
</tr>
</tbody>
</table>
<p>See also: <a class="reference internal" href="#c-api-tuple-box-tuple-ref"><span class="std std-ref">box_tuple_ref()</span></a></p>
</dd></dl>

<span class="target" id="c-api-tuple-box-tuple-field-count"></span><dl class="function">
<dt id="c.box_tuple_field_count">
uint32_t <code class="descname">box_tuple_field_count</code><big>(</big>const <a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t">box_tuple_t</a><em>&nbsp;*tuple</em><big>)</big><a class="headerlink" href="#c.box_tuple_field_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of fields in tuple (the size of MsgPack Array).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tuple</strong> (<a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t"><em>box_tuple_t*</em></a>) -- a tuple</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="c.box_tuple_bsize">
size_t <code class="descname">box_tuple_bsize</code><big>(</big>const <a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t">box_tuple_t</a><em>&nbsp;*tuple</em><big>)</big><a class="headerlink" href="#c.box_tuple_bsize" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of bytes used to store internal tuple data (MsgPack Array).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tuple</strong> (<a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t"><em>box_tuple_t*</em></a>) -- a tuple</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="c.box_tuple_to_buf">
ssize_t <code class="descname">box_tuple_to_buf</code><big>(</big>const <a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t">box_tuple_t</a><em>&nbsp;*tuple</em>, char<em>&nbsp;*buf</em>, size_t<em>&nbsp;size</em><big>)</big><a class="headerlink" href="#c.box_tuple_to_buf" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump raw MsgPack data to the memory buffer <code class="docutils literal"><span class="pre">buf</span></code> of size <code class="docutils literal"><span class="pre">size</span></code>.</p>
<p>Store tuple fields in the memory buffer.</p>
<p>Upon successful return, the function returns the number of bytes written.
If buffer size is not enough then the return value is the number of bytes
which would have been written if enough space had been available.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">-1 on error</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">number of bytes written on success.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="c.box_tuple_format">
<a class="reference internal" href="#c.box_tuple_format_t" title="box_tuple_format_t">box_tuple_format_t</a> *<code class="descname">box_tuple_format</code><big>(</big>const <a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t">box_tuple_t</a><em>&nbsp;*tuple</em><big>)</big><a class="headerlink" href="#c.box_tuple_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the associated format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tuple</strong> (<a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t"><em>box_tuple_t*</em></a>) -- a tuple</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">tuple format</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="c.box_tuple_field">
const char *<code class="descname">box_tuple_field</code><big>(</big>const <a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t">box_tuple_t</a><em>&nbsp;*tuple</em>, uint32_t<em>&nbsp;field_id</em><big>)</big><a class="headerlink" href="#c.box_tuple_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the raw tuple field in MsgPack format.</p>
<p>The buffer is valid until next call to box_tuple_* functions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tuple</strong> (<a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t"><em>box_tuple_t*</em></a>) -- a tuple</li>
<li><strong>field_id</strong> (<em>uint32_t</em>) -- zero-based index in MsgPack array.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">NULL if i &gt;= <a class="reference internal" href="#c-api-tuple-box-tuple-field-count"><span class="std std-ref">box_tuple_field_count()</span></a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">msgpack otherwise</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="type">
<dt id="c.box_tuple_iterator_t">
<code class="descname">box_tuple_iterator_t</code><a class="headerlink" href="#c.box_tuple_iterator_t" title="Permalink to this definition">¶</a></dt>
<dd><p>Tuple iterator</p>
</dd></dl>

<dl class="function">
<dt id="c.box_tuple_iterator">
<a class="reference internal" href="#c.box_tuple_iterator_t" title="box_tuple_iterator_t">box_tuple_iterator_t</a> *<code class="descname">box_tuple_iterator</code><big>(</big><a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t">box_tuple_t</a><em>&nbsp;*tuple</em><big>)</big><a class="headerlink" href="#c.box_tuple_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocate and initialize a new tuple iterator. The tuple iterator allow to
iterate over fields at root level of MsgPack array.</p>
<p><strong>Example:</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="n">box_tuple_iterator_t</span><span class="o">*</span> <span class="n">it</span> <span class="o">=</span> <span class="n">box_tuple_iterator</span><span class="p">(</span><span class="n">tuple</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">it</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// error handling using box_error_last()</span>
<span class="p">}</span>
<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">field</span><span class="p">;</span>
<span class="k">while</span> <span class="p">(</span><span class="n">field</span> <span class="o">=</span> <span class="n">box_tuple_next</span><span class="p">(</span><span class="n">it</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// process raw MsgPack data</span>
<span class="p">}</span>

<span class="c1">// rewind iterator to first position</span>
<span class="n">box_tuple_rewind</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
<span class="n">assert</span><span class="p">(</span><span class="n">box_tuple_position</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>

<span class="c1">// rewind three fields</span>
<span class="n">field</span> <span class="o">=</span> <span class="n">box_tuple_seek</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="n">assert</span><span class="p">(</span><span class="n">box_tuple_position</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">);</span>

<span class="n">box_iterator_free</span><span class="p">(</span><span class="n">it</span><span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="c.box_tuple_iterator_free">
void <code class="descname">box_tuple_iterator_free</code><big>(</big><a class="reference internal" href="#c.box_tuple_iterator_t" title="box_tuple_iterator_t">box_tuple_iterator_t</a><em>&nbsp;*it</em><big>)</big><a class="headerlink" href="#c.box_tuple_iterator_free" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroy and free tuple iterator</p>
</dd></dl>

<span class="target" id="c-api-tuple-box-tuple-position"></span><dl class="function">
<dt id="c.box_tuple_position">
uint32_t <code class="descname">box_tuple_position</code><big>(</big><a class="reference internal" href="#c.box_tuple_iterator_t" title="box_tuple_iterator_t">box_tuple_iterator_t</a><em>&nbsp;*it</em><big>)</big><a class="headerlink" href="#c.box_tuple_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Return zero-based next position in iterator. That is, this function
return the field id of field that will be returned by the next call
to <a class="reference internal" href="#c-api-tuple-box-tuple-next"><span class="std std-ref">box_tuple_next()</span></a>.
Returned value is zero after initialization
or rewind and <a class="reference internal" href="#c-api-tuple-box-tuple-field-count"><span class="std std-ref">box_tuple_field_count()</span></a>
after the end of iteration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>it</strong> (<a class="reference internal" href="#c.box_tuple_iterator_t" title="box_tuple_iterator_t"><em>box_tuple_iterator_t*</em></a>) -- a tuple iterator</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">position</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="c.box_tuple_rewind">
void <code class="descname">box_tuple_rewind</code><big>(</big><a class="reference internal" href="#c.box_tuple_iterator_t" title="box_tuple_iterator_t">box_tuple_iterator_t</a><em>&nbsp;*it</em><big>)</big><a class="headerlink" href="#c.box_tuple_rewind" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewind iterator to the initial position.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>it</strong> (<a class="reference internal" href="#c.box_tuple_iterator_t" title="box_tuple_iterator_t"><em>box_tuple_iterator_t*</em></a>) -- a tuple iterator</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>After: <code class="docutils literal"><span class="pre">box_tuple_position(it)</span> <span class="pre">==</span> <span class="pre">0</span></code></p>
</dd></dl>

<dl class="function">
<dt id="c.box_tuple_seek">
const char *<code class="descname">box_tuple_seek</code><big>(</big><a class="reference internal" href="#c.box_tuple_iterator_t" title="box_tuple_iterator_t">box_tuple_iterator_t</a><em>&nbsp;*it</em>, uint32_t<em>&nbsp;field_no</em><big>)</big><a class="headerlink" href="#c.box_tuple_seek" title="Permalink to this definition">¶</a></dt>
<dd><p>Seek the tuple iterator.</p>
<p>The returned buffer is valid until next call to box_tuple_* API.
Requested field_no returned by next call to box_tuple_next(it).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>it</strong> (<a class="reference internal" href="#c.box_tuple_iterator_t" title="box_tuple_iterator_t"><em>box_tuple_iterator_t*</em></a>) -- a tuple iterator</li>
<li><strong>field_no</strong> (<em>uint32_t</em>) -- field number - zero-based position
in MsgPack array</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>After:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">box_tuple_position(it)</span> <span class="pre">==</span> <span class="pre">field_not</span></code> if returned value is not NULL.</li>
<li><code class="docutils literal"><span class="pre">box_tuple_position(it)</span> <span class="pre">==</span> <span class="pre">box_tuple_field_count(tuple)</span></code> if returned
value is NULL.</li>
</ul>
</dd></dl>

<span class="target" id="c-api-tuple-box-tuple-next"></span><dl class="function">
<dt id="c.box_tuple_next">
const char *<code class="descname">box_tuple_next</code><big>(</big><a class="reference internal" href="#c.box_tuple_iterator_t" title="box_tuple_iterator_t">box_tuple_iterator_t</a><em>&nbsp;*it</em><big>)</big><a class="headerlink" href="#c.box_tuple_next" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the next tuple field from tuple iterator.</p>
<p>The returned buffer is valid until next call to box_tuple_* API.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>it</strong> (<a class="reference internal" href="#c.box_tuple_iterator_t" title="box_tuple_iterator_t"><em>box_tuple_iterator_t*</em></a>) -- </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">NULL if there are no more fields</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">MsgPack otherwise</p>
</td>
</tr>
</tbody>
</table>
<p>Before: <a class="reference internal" href="#c-api-tuple-box-tuple-position"><span class="std std-ref">box_tuple_position()</span></a>
is zero-based ID of returned field.</p>
<p>After: <code class="docutils literal"><span class="pre">box_tuple_position(it)</span> <span class="pre">==</span> <span class="pre">box_tuple_field_count(tuple)</span></code> if
returned value is NULL.</p>
</dd></dl>

<dl class="function">
<dt id="c.box_tuple_update">
<a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t">box_tuple_t</a> *<code class="descname">box_tuple_update</code><big>(</big>const <a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t">box_tuple_t</a><em>&nbsp;*tuple</em>, const char<em>&nbsp;*expr</em>, const char<em>&nbsp;*expr_end</em><big>)</big><a class="headerlink" href="#c.box_tuple_update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.box_tuple_upsert">
<a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t">box_tuple_t</a> *<code class="descname">box_tuple_upsert</code><big>(</big>const <a class="reference internal" href="#c.box_tuple_t" title="box_tuple_t">box_tuple_t</a><em>&nbsp;*tuple</em>, const char<em>&nbsp;*expr</em>, const char<em>&nbsp;*expr_end</em><big>)</big><a class="headerlink" href="#c.box_tuple_upsert" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


  
    
      <div class="b-page_over-tail">
    
    
      <div class="b-page_over-prev">
        <a href="trivia.html"
           class="b-prev b-ellipsis"
           title="Module &lt;cite&gt;trivia/config&lt;/cite&gt;">Module <cite>trivia/config</cite></a>
      </div>
    
    <div class="b-page_over-lang">
      <ul class="b-page_over-lang-list">
        <li class="b-page_over-lang-item">
          <a href="../_sources/reference_capi/tuple.txt"
             class="b-page_over-lang-url"> Source </a>
        </li>
      </ul>
    </div>
    
      <div class="b-page_over-next">
        <a href="txn.html"
           class="b-next b-ellipsis"
           title="Module &lt;cite&gt;txn&lt;/cite&gt;">Module <cite>txn</cite></a>
      </div>
    
    </div>
  
</div>
      </div>
    </div>
  

      </div>
    </div>

    <!-- FOOTER > -->
    <footer class="b-footer">
      <div class="b-footer-wrapper">
        <nav class="b-footer_menu">
          
  <ul class="b-menu">
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org" class="b-menu-item-url">Overview</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://try.tarantool.org" class="b-menu-item-url">Try</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org/doc/" class="b-menu-item-url p-active">Documentation</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org/download.html" class="b-menu-item-url">Download</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org/careers.html" class="b-menu-item-url">Careers</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://rocks.tarantool.org" class="b-menu-item-url">Rocks</a>
        
      </li>
    
  </ul>

          <div class="b-footer-other">
            <a href="http://stable.tarantool.org">1.5 web site and downloads</a>
          </div>
        </nav>
      </div>
    </footer>
  <!-- < FOOTER -->
  </body>
</html>

