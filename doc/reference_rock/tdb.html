




<!doctype html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Module tdb</title>
    <link rel="icon" type="image/png" sizes="192x192"
          href="/theme/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32"
          href="/theme/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96"
          href="/theme/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16"
          href="/theme/favicon/favicon-16x16.png">
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.7.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
      
      
    </script>
    <script id="dsq-count-scr"
            src="//tarantooldb.disqus.com/count.js" async/>
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/jquery.pin.min.js"></script>
    <script type="text/javascript" src="../_static/headers.js"></script>
    <link rel="stylesheet" href="/theme/design.css">
    <link rel="stylesheet" href="/theme/pygmentize.css">
    <link rel="stylesheet" href="/theme/font-awesome.min.css">
    <link rel="stylesheet" href="../_static/sphinx_design.css">
     
    <!--[if lt IE 9]>
      <script src="/js/ie8.js"></script>
      <link rel="stylesheet" href="/theme/ie8.css" />
    <![endif]-->
    <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-22120502-1', 'auto');
  ga('send', 'pageview');
</script>

<!-- Rating@Mail.ru counter -->
<script type="text/javascript">
  var _tmr = _tmr || [];
  _tmr.push({id: "2284916", type: "pageView", start: (new Date()).getTime()});
  (function (d, w) {
    var ts = d.createElement("script"); ts.type = "text/javascript"; ts.async = true;
    ts.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//top-fwz1.mail.ru/js/code.js";
    var f = function () {var s = d.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ts, s);};
    if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); }
  })(document, window);
</script>
<noscript>
  <div style="position:absolute;left:-10000px;">
    <img src="//top-fwz1.mail.ru/counter?id=2284916;js=na" style="border:0;"
         height="1" width="1" alt="Рейтинг@Mail.ru" />
  </div>
</noscript>
<!-- //Rating@Mail.ru counter -->


  </head>
  
  <body class="p-cols_design">
  
    <div class="b-wrapper">
      <!-- HEADER > -->
      <header class="b-header">
        <div class="b-header-wrapper">
          <nav class="b-header_menu">
            
  <ul class="b-menu">
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org" class="b-menu-item-url">Overview</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://try.tarantool.org" class="b-menu-item-url">Try</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org/doc/" class="b-menu-item-url p-active">Documentation</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org/download.html" class="b-menu-item-url">Download</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org/careers.html" class="b-menu-item-url">Careers</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://rocks.tarantool.org" class="b-menu-item-url">Rocks</a>
        
      </li>
    
  </ul>

          </nav>
        </div>
      </header>
      <!-- < HEADER -->

      <div class="b-content b-clearbox">
        
  <section class="b-lightgray_block b-documentation_top b-clearbox p-documentation_in">
    <div class="b-block-wrapper">
      <h2 class="b-section-title b-ellipsis" title="Module tdb">
        Module tdb
      </h2>
  <div class="b-doc-language_selector">
    <ul class="b-doc-language_selector-list">
    
      <li class="b-doc-language_selector-item">
      
        <a href="
  
    ../../reference_rock/tdb.html
  
"
           class="b-doc-language_selector-item-url p-active"> En </a>
      
      </li>
    
      <li class="b-doc-language_selector-item">
      
        <a href="
  
    ../ru/reference_rock/tdb.html
  
"
           class="b-doc-language_selector-item-url"> Ru </a>
      
      </li>
    
    </ul>
  </div>
</div>
  </section>
  
    <div class="b-cols_content b-clearbox b-doc-reference_rock/tdb">
      <div class="b-cols_content_left">
        
<form id="searchbox" role="search" class="search b-search" action="../search.html" method="get">
  <input class="b-search-text" name="q" type="text"/ placeholder="Search the manual">
  <input class="b-search-but" type="submit" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>


        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../book/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_lua/index.html">Lua reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Lua rocks reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="dbms.html">SQL DBMS Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="expirationd.html">Module <cite>expirationd</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="shard.html">Module <cite>shard</cite></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Module <cite>tdb</cite></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference_capi/index.html">C API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/index.html">Contributing</a></li>
</ul>

      </div>
      <div class="b-cols_content_right">
        <div class="b-cols_content_right-slot">
  <div class="b-page_header">
    <ul class="b-path-list">
      <li class="b-path-list-item">
        <a href="../index.html"
           class="b-path-list-item-url">
          Documentation
        </a>
      </li>
      
        <li class="b-path-list-item">
          <a href="index.html"
             class="b-path-list-item-url b-ellipsis">
            Lua rocks reference
          </a>
        </li>
      
      
      <li class="b-path-list-item">
        <div title="Module <cite>tdb</cite>" class="b-path_current b-ellipsis">
          Module <cite>tdb</cite>
        </div>
      </li>
      
    </ul>
  </div>

  <div class="section" id="module-tdb">
<h1>Module <cite>tdb</cite><a class="headerlink" href="#module-tdb" title="Permalink to this headline">¶</a></h1>
<p>The Tarantool Debugger (abbreviation = tdb) can be used with any Lua program.
The operational features include: setting breakpoints, examining variables,
going forward one line at a time, backtracing, and showing information about
fibers. The display features include: using different colors for different
situations, including line numbers, and adding hints.</p>
<p>It is not supplied as part of the Tarantool repository; it must be installed
separately. Here is the usual way:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git clone --recursive https://github.com/Sulverus/tdb
<span class="nb">cd</span> tdb
make
sudo make install <span class="nv">prefix</span><span class="o">=</span>/usr/share/tarantool/
</pre></div>
</div>
<p>To initiate tdb within a Lua program and set a breakpoint, edit the program to
include these lines:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">tdb</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">tdb&#39;</span><span class="p">)</span>
<span class="n">tdb</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<p>To start the debugging session, execute the Lua program. Execution will stop at
the breakpoint, and it will be possible to enter debugging commands.</p>
<div class="section" id="debugger-commands">
<h2>Debugger Commands<a class="headerlink" href="#debugger-commands" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><span class="ccodeb">bt</span></dt>
<dd>Backtrace -- show the stack (in red), with program/function names and line
numbers of whatever has been invoked to reach the current line.</dd>
<dt><span class="ccodeb">c</span></dt>
<dd>Continue till next breakpoint or till program ends.</dd>
<dt><span class="ccodeb">e</span></dt>
<dd>Enter evaluation mode. When the program is in evaluation mode, one can
execute certain Lua statements that would be valid in the context. This is
particularly useful for displaying the values of the program's variables.
Other debugger commands will not work until one exits evaluation mode by
typing <span class="ccodeb">-e</span>.</dd>
<dt><span class="ccodeb">-e</span></dt>
<dd>Exit evaluation mode.</dd>
<dt><span class="ccodeb">f</span></dt>
<dd>Display the fiber id, the program name, and the percentage of memory used,
as a table.</dd>
<dt><span class="ccodeb">n</span></dt>
<dd>Go to the next line, skipping over any function calls.</dd>
<dt><span class="ccodeb">globals</span></dt>
<dd>Display names of variables or functions which are defined as global.</dd>
<dt><span class="ccodeb">h</span></dt>
<dd>Display a list of debugger commands.</dd>
<dt><span class="ccodeb">locals</span></dt>
<dd>Display names and values of variables, for example the control variables of
a Lua &quot;for&quot; statement.</dd>
<dt><span class="ccodeb">q</span></dt>
<dd>Quit immediately.</dd>
</dl>
</div>
<div class="section" id="example-session">
<h2>Example Session<a class="headerlink" href="#example-session" title="Permalink to this headline">¶</a></h2>
<p>Put the following program in a default directory and call it &quot;example.lua&quot;:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">tdb</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">tdb&#39;</span><span class="p">)</span>
<span class="n">tdb</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">j</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">a&#39;</span> <span class="o">..</span> <span class="n">i</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">end of program&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now start Tarantool, using example.lua as the initialization file</p>
<pre class="highlight literal-block">
$ <span class="ccodeb">tarantool example.lua</span>
</pre>
<p>The screen should now look like this:</p>
<pre class="highlight literal-block">
$ <span class="ccodeb">tarantool example.lua</span>
<span class="ccodeblue">(TDB)</span>  <span class="ccodegreen">Tarantool debugger v.0.0.3. Type h for help</span>
example.lua
<span class="ccodeblue">(TDB)</span>  <span class="ccodegreen">[example.lua]</span>
<span class="ccodeblue">(TDB)</span>  <span class="ccode">3: i = 1</span>
<span class="ccodeblue">(TDB)&gt;</span>
</pre>
<p>Debugger prompts are blue, debugger hints and information
are green, and the current line -- line 3 of example.lua --
is the default color. Now enter six debugger commands:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">n</span>  <span class="c1">-- go to next line</span>
<span class="n">n</span>  <span class="c1">-- go to next line</span>
<span class="n">e</span>  <span class="c1">-- enter evaluation mode</span>
<span class="n">j</span>  <span class="c1">-- display j</span>
<span class="o">-</span><span class="n">e</span> <span class="c1">-- exit evaluation mode</span>
<span class="n">q</span>  <span class="c1">-- quit</span>
</pre></div>
</div>
<p>The screen should now look like this:</p>
<pre class="highlight literal-block">
$ <span class="ccodeb">tarantool example.lua</span>
<span class="ccodeblue">(TDB)</span>  <span class="ccodegreen">Tarantool debugger v.0.0.3. Type h for help</span>
example.lua
<span class="ccodeblue">(TDB)</span>  <span class="ccodegreen">[example.lua]</span>
<span class="ccodeblue">(TDB)</span>  <span class="ccode">3: i = 1</span>
<span class="ccodeblue">(TDB)&gt;</span> n
<span class="ccodeblue">(TDB)</span>  <span class="ccode">4: j = 'a' .. i</span>
<span class="ccodeblue">(TDB)&gt;</span> n
<span class="ccodeblue">(TDB)</span>  <span class="ccode">5: print('end of program')</span>
<span class="ccodeblue">(TDB)&gt;</span> e
<span class="ccodeblue">(TDB)</span>  <span class="ccodegreen">Eval mode ON</span>
<span class="ccodeblue">(TDB)&gt;</span> j
j       a1
<span class="ccodeblue">(TDB)&gt;</span> -e
<span class="ccodeblue">(TDB)</span>  <span class="ccodegreen">Eval mode OFF</span>
<span class="ccodeblue">(TDB)&gt;</span> q
</pre>
<p>Another debugger example can be found <a class="reference external" href="https://github.com/sulverus/tdb">here</a>.</p>
</div>
</div>


          
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
        // Replace PAGE_URL with your page's canonical URL variable
        // this.page.url = PAGE_URL;
        this.page.identifier = "reference_rock/tdb";
        this.language = "en"
    };
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//tarantooldb.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>
    Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript" rel="nofollow">
      comments powered by Disqus.
    </a>
  </noscript>

  
    
      <div class="b-page_over-tail">
    
    
      <div class="b-page_over-prev">
        <a href="shard.html"
           class="b-prev b-ellipsis"
           title="Module &lt;cite&gt;shard&lt;/cite&gt;">Module <cite>shard</cite></a>
      </div>
    
    <div class="b-page_over-lang">
      <ul class="b-page_over-lang-list">
        <li class="b-page_over-lang-item">
          <a href="../_sources/reference_rock/tdb.txt"
             class="b-page_over-lang-url"> Source </a>
        </li>
      </ul>
    </div>
    
      <div class="b-page_over-next">
        <a href="../reference_capi/index.html"
           class="b-next b-ellipsis"
           title="C API reference">C API reference</a>
      </div>
    
    </div>
  
</div>
      </div>
    </div>
  
  <script>
  </script>

      </div>
    </div>

    <!-- FOOTER > -->
    <footer class="b-footer">
      <div class="b-footer-wrapper">
        <nav class="b-footer_menu">
          
  <ul class="b-menu">
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org" class="b-menu-item-url">Overview</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://try.tarantool.org" class="b-menu-item-url">Try</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org/doc/" class="b-menu-item-url p-active">Documentation</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org/download.html" class="b-menu-item-url">Download</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org/careers.html" class="b-menu-item-url">Careers</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://rocks.tarantool.org" class="b-menu-item-url">Rocks</a>
        
      </li>
    
  </ul>

          <div class="b-footer-other">
            <a href="http://stable.tarantool.org">1.5 web site and downloads</a>
          </div>
        </nav>
      </div>
    </footer>
  <!-- < FOOTER -->
  </body>
</html>

