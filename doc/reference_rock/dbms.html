





<!doctype html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SQL DBMS Modules</title>
    <link rel="icon" type="image/png" sizes="192x192"
          href="/theme/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32"
          href="/theme/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96"
          href="/theme/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16"
          href="/theme/favicon/favicon-16x16.png">
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:       '',
        VERSION:        '1.7.1',
        COLLAPSE_INDEX:  false,
        FILE_SUFFIX:    '.html',
        HAS_SOURCE:      true
      };
      
      
      var disqus_config = function () {
          // Replace PAGE_URL with your page's canonical URL variable
          // this.page.url = PAGE_URL;
          this.page.identifier = "reference_rock/dbms";
          this.language = "en"
      };
    </script>
    <script id="dsq-count-scr" src="https://tarantooldb.disqus.com/count.js" async/></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/jquery.pin.min.js"></script>
    <script type="text/javascript" src="../_static/headers.js"></script>
    <script type="text/javascript" src="../_static/jquery-ui.min.js"></script>
    <script type="text/javascript" src="/js/menu.js"></script>
    <script type="text/javascript" src="/js/mobile_menu.js"></script>
    <link rel="stylesheet" href="/theme/font-awesome.min.css">
    <link rel="stylesheet" href="/theme/design.css">
    <link rel="stylesheet" href="/theme/pygmentize.css">
    <link rel="stylesheet" href="../_static/sphinx_design.css">
     
    <!--[if lt IE 9]>
      <script src="/js/ie8.js"></script>
      <link rel="stylesheet" href="/theme/ie8.css" />
    <![endif]-->
    <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-22120502-1', 'auto');
  ga('send', 'pageview');
</script>

<!-- Rating@Mail.ru counter -->
<script type="text/javascript">
  var _tmr = _tmr || [];
  _tmr.push({id: "2284916", type: "pageView", start: (new Date()).getTime()});
  (function (d, w) {
    var ts = d.createElement("script"); ts.type = "text/javascript"; ts.async = true;
    ts.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//top-fwz1.mail.ru/js/code.js";
    var f = function () {var s = d.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ts, s);};
    if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); }
  })(document, window);
</script>
<noscript>
  <div style="position:absolute;left:-10000px;">
    <img src="//top-fwz1.mail.ru/counter?id=2284916;js=na" style="border:0;"
         height="1" width="1" alt="Рейтинг@Mail.ru" />
  </div>
</noscript>
<!-- //Rating@Mail.ru counter -->


  </head>
  
  <body class="p-cols_design b-doc-reference_rock/dbms">
  
    <div class="b-wrapper">
      <!-- HEADER > -->
      
  <header class="b-header">
    <div class="b-header_menu_mobile">
      <div class="b-burger-button">
        <span></span>
      </div>
      <form role="search" class="b-header-search" action="../search.html" method="get">
        <input name="q" type="search">
      </form>
    </div>
    <div class="b-menu_mobile">
      <div class="b-menu_mobile__wrapper">
        <nav class="b-header_menu">
          
  <ul class="b-menu">
    
      <li class="b-menu-item">
        <a href="/" class="b-menu-item-url">Overview</a>
      </li>
    
      <li class="b-menu-item">
        <a href="http://try.tarantool.org" class="b-menu-item-url">Try</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/doc/" class="b-menu-item-url">Documentation</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/download.html" class="b-menu-item-url">Download</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/careers.html" class="b-menu-item-url">Careers</a>
      </li>
    
      <li class="b-menu-item">
        <a href="http://rocks.tarantool.org" class="b-menu-item-url">Rocks</a>
      </li>
    
  </ul>

        </nav>
      </div>
      <div class="b-menu__close">
        <!-- empty -->
      </div>
    </div>
    <div class="b-header-wrapper">
      <nav class="b-header_menu">
        
  <ul class="b-menu">
    
      <li class="b-menu-item">
        <a href="/" class="b-menu-item-url">Overview</a>
      </li>
    
      <li class="b-menu-item">
        <a href="http://try.tarantool.org" class="b-menu-item-url">Try</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/doc/" class="b-menu-item-url">Documentation</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/download.html" class="b-menu-item-url">Download</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/careers.html" class="b-menu-item-url">Careers</a>
      </li>
    
      <li class="b-menu-item">
        <a href="http://rocks.tarantool.org" class="b-menu-item-url">Rocks</a>
      </li>
    
  </ul>

      </nav>
    </div>
  </header>

      <!-- < HEADER -->

      <div class="b-content b-clearbox">
        
  <section class="b-lightgray_block b-documentation_top b-clearbox p-documentation_in">
    <div class="b-block-wrapper">
      <h2
      
        class="b-section-title b-ellipsis toggle-navigation"
      
        title="SQL DBMS Modules">
          SQL DBMS Modules
      </h2>
  <div class="b-doc-language_selector">
    <ul class="b-doc-language_selector-list">
    
      <li class="b-doc-language_selector-item">
      
        <a href="
  
    ../../reference_rock/dbms.html
  
"
           class="b-doc-language_selector-item-url p-active"> En </a>
      
      </li>
    
      <li class="b-doc-language_selector-item">
      
        <a href="
  
    ../ru/reference_rock/dbms.html
  
"
           class="b-doc-language_selector-item-url"> Ru </a>
      
      </li>
    
    </ul>
  </div>
</div>
  </section>
  
    <div class="b-cols_content b-clearbox">
      <div class="b-cols_content_left">
        
<form id="searchbox" role="search" class="search b-search" action="../search.html" method="get">
  <input class="b-search-text" name="q" type="text"/ placeholder="Search the manual">
  <input class="b-search-but" type="submit" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#an-application-server-together-with-a-database-manager">An Application Server Together With A Database Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#database-features">Database Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../book/index.html">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../book/intro.html">1. Preface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/intro.html#how-to-read-the-documentation">1.1. How to read the documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/intro.html#getting-in-touch-with-the-tarantool-community">1.2. Getting in touch with the Tarantool community</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/user_guide_getting_started.html">2. Getting started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/user_guide_getting_started.html#downloading-and-installing-a-binary-package">2.1. Downloading and installing a binary package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/user_guide_getting_started.html#starting-tarantool-and-making-your-first-database">2.2. Starting Tarantool and making your first database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/user_guide_getting_started.html#connecting-remotely">2.3. Connecting remotely</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/box/index.html">3. Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/box/index.html#document-data-model">3.1. Document data model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/box/index.html#space">3.1.1. Space</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/index.html#tuple-set">3.1.2. Tuple set</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/index.html#index">3.1.3. Index</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/index.html#data-types">3.1.4. Data types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/index.html#operations">3.1.5. Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/index.html#saving-to-disk">3.1.6. Saving to disk</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/index.html#data-manipulation">3.1.7. Data manipulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/index.html#index-operations">3.1.8. Index operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/index.html#the-box-library">3.1.9. The box library</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/box/index.html#submodules-of-the-box-library">3.2. Submodules of the box library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/box/index.html#the-two-storage-engines-memtx-and-vinyl">3.3. The two storage engines: memtx and vinyl</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/box/index.html#library-reference">3.4. Library reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_schema.html">3.4.1. Submodule <cite>box.schema</cite></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_schema.html#example">3.4.1.1. Example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_space.html">3.4.2. Submodule <cite>box.space</cite></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_space.html#example-use-box-space-functions-to-read-space-tuples">3.4.2.1. Example: use box.space functions to read _space tuples</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_space.html#example-use-box-space-functions-to-organize-a-space-tuple">3.4.2.2. Example: use box.space functions to organize a _space tuple</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_index.html">3.4.3. Submodule <cite>box.index</cite></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_index.html#example-showing-use-of-the-box-functions">3.4.3.1. Example showing use of the box functions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_index.html#example-showing-a-user-defined-iterator">3.4.3.2. Example showing a user-defined iterator</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_index.html#submodule-box-index-with-index-type-rtree-for-spatial-searches">3.4.3.3. Submodule <cite>box.index</cite> with index type = RTREE for spatial searches</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_session.html">3.4.4. Submodule <cite>box.session</cite></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_session.html#example">3.4.4.1. Example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_tuple.html">3.4.5. Submodule <cite>box.tuple</cite></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_tuple.html#example">3.4.5.1. Example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_introspection.html">3.4.6. Server introspection</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_introspection.html#lua-module.box.cfg">3.4.6.1. Submodule <cite>box.cfg</cite></a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_introspection.html#lua-module.box.info">3.4.6.2. Submodule <cite>box.info</cite></a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_introspection.html#lua-module.box.slab">3.4.6.3. Submodule <cite>box.slab</cite></a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_introspection.html#submodule-box-stat">3.4.6.4. Submodule <cite>box.stat</cite></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/admin.html">3.4.7. Administrative requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/atomic.html">3.4.8. Atomic execution</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/atomic.html#cooperative-multitasking-environment">3.4.8.1. Cooperative multitasking environment</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/atomic.html#example">3.4.8.2. Example</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/atomic.html#the-implicit-yield-rules">3.4.8.3. The Implicit Yield Rules</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/authentication.html">3.4.9. Access control</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/authentication.html#passwords">3.4.9.1. Passwords</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/authentication.html#users-and-the-user-space">3.4.9.2. Users and the _user space</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/authentication.html#privileges-and-the-priv-space">3.4.9.3. Privileges and the _priv space</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/authentication.html#functions-and-the-func-space">3.4.9.4. Functions and the _func space</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/authentication.html#box-session-and-security">3.4.9.5. <code class="docutils literal"><span class="pre">box.session</span></code> and security</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/authentication.html#roles">3.4.9.6. Roles</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/authentication.html#example-showing-a-role-within-a-role">3.4.9.7. Example showing a role within a role</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/triggers.html">3.4.10. Triggers</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/triggers.html#connection-triggers">3.4.10.1. Connection triggers</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../book/box/triggers.html#example">3.4.10.1.1. Example</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/triggers.html#authentication-triggers">3.4.10.2. Authentication triggers</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/triggers.html#lua-module.box.space">3.4.10.3. Replace triggers</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../book/box/triggers.html#id1">3.4.10.3.1. Example</a></li>
<li class="toctree-l6"><a class="reference internal" href="../book/box/triggers.html#another-example">3.4.10.3.2. Another Example</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/triggers.html#getting-a-list-of-triggers">3.4.10.4. Getting a list of triggers</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/limitations.html">3.4.11. Limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/vinyl_diff.html">3.4.12. Differences between memtx and vinyl storage engines</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/replication/index.html">4. Replication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#replication-architecture">4.1. Replication architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#setting-up-the-master">4.2. Setting up the master</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#setting-up-a-replica">4.3. Setting up a replica</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#recovering-from-a-degraded-state">4.4. Recovering from a degraded state</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#instructions-for-quick-startup-of-a-new-two-server-simple-cluster">4.5. Instructions for quick startup of a new two-server simple cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#monitoring-a-replica-s-actions">4.6. Monitoring a replica's actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#preventing-duplicate-actions">4.7. Preventing duplicate actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#master-master-replication">4.8. Master-master replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#all-the-what-if-questions">4.9. All the &quot;What If?&quot; questions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#hands-on-replication-tutorial">4.10. Hands-on replication tutorial</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/configuration/index.html">5. Configuration reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/configuration/index.html#command-options">5.1. Command options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/configuration/index.html#uri">5.2. URI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/configuration/index.html#initialization-file">5.3. Initialization file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/configuration/index.html#configuration-parameters">5.4. Configuration parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/configuration/index.html#basic-parameters">5.4.1. Basic parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/configuration/index.html#configuring-the-storage">5.4.2. Configuring the storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/configuration/index.html#snapshot-daemon">5.4.3. Snapshot daemon</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/configuration/index.html#binary-logging-and-snapshots">5.4.4. Binary logging and snapshots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/configuration/index.html#replication">5.4.5. Replication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/configuration/index.html#networking">5.4.6. Networking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/configuration/index.html#logging">5.4.7. Logging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/configuration/index.html#local-hot-standby">5.5. Local hot standby</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/administration.html">6. Server administration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#server-signal-handling">6.1. Server signal handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#process-title">6.2. Process title</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#using-tarantool-as-a-client">6.3. Using tarantool as a client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#conventions-used-in-this-section">6.3.1. Conventions used in this section</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#options-when-starting-client-from-the-command-line">6.3.2. Options when starting client from the command line</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#tokens-requests-and-special-key-combinations">6.3.3. Tokens, requests, and special key combinations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#requests">6.3.4. Requests</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#utility-tarantoolctl">6.4. Utility tarantoolctl</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#configuration-for-tarantoolctl">6.4.1. Configuration for tarantoolctl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#commands-for-tarantoolctl">6.4.2. Commands for tarantoolctl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#typical-code-snippets-for-tarantoolctl">6.4.3. Typical code snippets for tarantoolctl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#a-detailed-example-for-tarantoolctl">6.4.4. A detailed example for tarantoolctl</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#utility-tarantoolctl-connect">6.5. Utility tarantoolctl connect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#admin-ports">6.6. Admin ports</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#system-specific-administration-notes">6.7. System-specific administration notes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#debian-gnu-linux-and-ubuntu">6.7.1. Debian GNU/Linux and Ubuntu</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#fedora-rhel-centos">6.7.2. Fedora, RHEL, CentOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#freebsd">6.7.3. FreeBSD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#mac-os-x">6.7.4. Mac OS X</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#notes-for-systemd-users">6.8. Notes for systemd users</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#instance-management">6.8.1. Instance management</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/administration.html#creating-instances">6.8.1.1. Creating instances</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/administration.html#starting-instances">6.8.1.2. Starting instances</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/administration.html#monitoring-instances">6.8.1.3. Monitoring instances</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/administration.html#attaching-to-instances">6.8.1.4. Attaching to instances</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/administration.html#checking-logs">6.8.1.5. Checking logs</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/administration.html#stopping-instances">6.8.1.6. Stopping instances</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#daemon-supervision">6.8.2. Daemon supervision</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#customizing-the-service-file">6.8.3. Customizing the service file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#debugging">6.8.4. Debugging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#precautions">6.8.5. Precautions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#updating-tarantool-in-production">6.9. Updating Tarantool in production</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#backups">6.10. Backups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#upgrades">6.11. Upgrades</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/connectors/index.html">7. Connectors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#protocol">7.1. Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#packet-example">7.2. Packet example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#setting-up-the-server-for-connector-examples">7.3. Setting up the server for connector examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#java">7.4. Java</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#go">7.5. Go</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#r">7.6. R</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#perl">7.7. Perl</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#php">7.8. PHP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#python">7.9. Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#c">7.10. C</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/connectors/index.html#example-1">7.10.1. Example 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/connectors/index.html#example-2">7.10.2. Example 2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#interpreting-function-return-values">7.11. Interpreting function return values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/modules.html">8. Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/modules.html#installing-an-existing-module">8.1. Installing an existing module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/modules.html#creating-a-new-lua-module-locally">8.2. Creating a new Lua module locally</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/modules.html#creating-a-new-c-c-module-locally">8.3. Creating a new C/C++ module locally</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/modules.html#creating-a-mixed-lua-c-module-locally">8.4. Creating a mixed Lua/C module locally</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/modules.html#tips-for-special-situations">8.5. Tips for special situations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/app/a_errcodes.html">9. Appendix A. List of error codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../book/app/b_internals.html">10. Appendix B. Internals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/app/b_internals.html#data-persistence-and-the-wal-file-format">10.1. Data persistence and the WAL file format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/app/b_internals.html#the-snapshot-file-format">10.2. The snapshot file format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/app/b_internals.html#the-recovery-process">10.3. The Recovery Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/app/b_internals.html#server-startup-with-replication">10.4. Server Startup With Replication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/app/c_lua_tutorial.html">11. Appendix C. Lua tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/app/c_lua_tutorial.html#insert-one-million-tuples-with-a-lua-stored-procedure">11.1. Insert one million tuples with a Lua stored procedure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/app/c_lua_tutorial.html#configure">11.1.1. Configure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/c_lua_tutorial.html#delimiter">11.1.2. Delimiter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/c_lua_tutorial.html#create-a-function-that-returns-a-string">11.1.3. Create a function that returns a string</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/c_lua_tutorial.html#create-a-function-that-calls-another-function-and-sets-a-variable">11.1.4. Create a function that calls another function and sets a variable</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/c_lua_tutorial.html#modify-the-function-so-it-returns-a-one-letter-random-string">11.1.5. Modify the function so it returns a one-letter random string</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/c_lua_tutorial.html#modify-the-function-so-it-returns-a-ten-letter-random-string">11.1.6. Modify the function so it returns a ten-letter random string</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/c_lua_tutorial.html#make-a-tuple-out-of-a-number-and-a-string">11.1.7. Make a tuple out of a number and a string</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/c_lua_tutorial.html#modify-main-function-to-insert-a-tuple-into-the-database">11.1.8. Modify main_function to insert a tuple into the database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/c_lua_tutorial.html#modify-main-function-to-insert-a-million-tuples-into-the-database">11.1.9. Modify main_function to insert a million tuples into the database</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/app/c_lua_tutorial.html#sum-a-json-field-for-all-tuples">11.2. Sum a JSON field for all tuples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/app/c_lua_tutorial.html#indexed-pattern-search">11.3. Indexed Pattern Search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/app/d_vinyl/index.html">12. Appendix D. Vinyl</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/app/d_vinyl/index.html#introduction">12.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/app/d_vinyl/index.html#under-the-hood">12.2. Under the hood</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/app/d_vinyl/index.html#inserting-the-first-200-000-keys">12.2.1. Inserting the first 200.000 keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/d_vinyl/index.html#inserting-the-next-300-000-keys">12.2.2. Inserting the next 300.000 keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/d_vinyl/index.html#inserting-the-next-200-000-keys">12.2.3. Inserting the next 200.000 keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/d_vinyl/index.html#inserting-the-last-300-000-keys">12.2.4. Inserting the last 300.000 keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/d_vinyl/index.html#reading-million-keys">12.2.5. Reading million keys</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/app/e_cookbook.html">13. Appendix E. Cookbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../book/app/f_c_tutorial.html">14. Appendix F. C tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/app/f_c_tutorial.html#c-stored-procedures">14.1. C stored procedures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/app/g_changes.html">15. Appendix G. Version-specific changes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/app/g_changes.html#changes-in-tarantool-version-1-7">15.1. Changes in Tarantool version 1.7</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference_lua/index.html">Lua reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/box.html">Module <cite>box</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/box/box_schema.html">3.4.1. Submodule <cite>box.schema</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_schema.html#example">3.4.1.1. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/box/box_space.html">3.4.2. Submodule <cite>box.space</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_space.html#example-use-box-space-functions-to-read-space-tuples">3.4.2.1. Example: use box.space functions to read _space tuples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_space.html#example-use-box-space-functions-to-organize-a-space-tuple">3.4.2.2. Example: use box.space functions to organize a _space tuple</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/box/box_index.html">3.4.3. Submodule <cite>box.index</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_index.html#example-showing-use-of-the-box-functions">3.4.3.1. Example showing use of the box functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_index.html#example-showing-a-user-defined-iterator">3.4.3.2. Example showing a user-defined iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_index.html#submodule-box-index-with-index-type-rtree-for-spatial-searches">3.4.3.3. Submodule <cite>box.index</cite> with index type = RTREE for spatial searches</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/box/box_session.html">3.4.4. Submodule <cite>box.session</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_session.html#example">3.4.4.1. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/box/box_tuple.html">3.4.5. Submodule <cite>box.tuple</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_tuple.html#example">3.4.5.1. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/box/box_introspection.html">3.4.6. Server introspection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_introspection.html#lua-module.box.cfg">3.4.6.1. Submodule <cite>box.cfg</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_introspection.html#lua-module.box.info">3.4.6.2. Submodule <cite>box.info</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_introspection.html#lua-module.box.slab">3.4.6.3. Submodule <cite>box.slab</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_introspection.html#submodule-box-stat">3.4.6.4. Submodule <cite>box.stat</cite></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/box/triggers.html">3.4.10. Triggers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/box/triggers.html#connection-triggers">3.4.10.1. Connection triggers</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/triggers.html#example">3.4.10.1.1. Example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/triggers.html#authentication-triggers">3.4.10.2. Authentication triggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/triggers.html#lua-module.box.space">3.4.10.3. Replace triggers</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/triggers.html#id1">3.4.10.3.1. Example</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/triggers.html#another-example">3.4.10.3.2. Another Example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/triggers.html#getting-a-list-of-triggers">3.4.10.4. Getting a list of triggers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/clock.html">Module <cite>clock</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/console.html">Module <cite>console</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/crypto.html">Module <cite>crypto</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference_lua/crypto.html#incremental-methods-in-the-crypto-module">Incremental methods in the crypto module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference_lua/crypto.html#getting-the-same-results-from-digest-and-crypto-modules">Getting the same results from digest and crypto modules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/csv.html">Module <cite>csv</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/digest.html">Module <cite>digest</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference_lua/digest.html#incremental-methods-in-the-digest-module">Incremental methods in the digest module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference_lua/digest.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/box_error.html">Submodule <cite>box.error</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/fiber.html">Module <cite>fiber</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference_lua/fiber.html#example-of-fiber-use">Example Of Fiber Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/fiber_ipc.html">Submodule <cite>fiber-ipc</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference_lua/fiber_ipc.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/fio.html">Module <cite>fio</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference_lua/fio.html#common-pathname-manipulations">Common pathname manipulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference_lua/fio.html#common-file-manipulations">Common file manipulations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/fun.html">Module <cite>fun</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/jit.html">Module <cite>jit</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/json.html">Module <cite>json</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference_lua/json.html#configuration-settings">Configuration settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/log.html">Module <cite>log</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference_lua/log.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/msgpack.html">Module <cite>msgpack</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference_lua/msgpack.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/net_box.html">Module <cite>net.box</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference_lua/net_box.html#example-showing-use-of-most-of-the-net-box-methods">Example showing use of most of the net.box methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/box_once.html">Function <cite>box.once</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/os.html">Module <cite>os</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/pickle.html">Module <cite>pickle</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/socket.html">Module <cite>socket</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference_lua/socket.html#example">Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference_lua/socket.html#use-of-a-tcp-socket-over-the-internet">Use of a TCP socket over the Internet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference_lua/socket.html#use-of-a-udp-socket-on-localhost">Use of a UDP socket on localhost</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference_lua/socket.html#use-tcp-server-to-accept-file-contents-sent-with-socat">Use tcp_server to accept file contents sent with socat</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/strict.html">Module <cite>strict</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/tap.html">Module <cite>tap</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference_lua/tap.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/tarantool.html">Module <cite>tarantool</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/uuid.html">Module <cite>uuid</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference_lua/uuid.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/yaml.html">Module <cite>yaml</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference_lua/yaml.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference_lua/other.html">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Lua rocks reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">SQL DBMS Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mysql-example">MySQL Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#with-luarocks">With LuaRocks</a></li>
<li class="toctree-l5"><a class="reference internal" href="#with-github">With GitHub</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#connecting">Connecting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-ping">How to ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="#executing-a-statement">Executing a statement</a></li>
<li class="toctree-l4"><a class="reference internal" href="#closing-connection">Closing connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#postgresql-example">PostgreSQL Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Installation</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id2">With LuaRocks</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id3">With GitHub</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#id4">Connecting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">How to ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Executing a statement</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7">Closing connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="expirationd.html">Module <cite>expirationd</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="shard.html">Module <cite>shard</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="shard.html#example-shard-init-syntax-for-one-shard">Example: shard.init syntax for one shard</a></li>
<li class="toctree-l3"><a class="reference internal" href="shard.html#example-shard-init-syntax-for-three-shards">Example: shard.init syntax for three shards</a></li>
<li class="toctree-l3"><a class="reference internal" href="shard.html#example-shard-minimal-configuration">Example: Shard, Minimal Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="shard.html#example-shard-scaling-out">Example: Shard, Scaling Out</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tdb.html">Module <cite>tdb</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="tdb.html#debugger-commands">Debugger Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="tdb.html#example-session">Example Session</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference_capi/index.html">C API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/box.html">Module <cite>box</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/clock.html">Module <cite>clock</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/coio.html">Module <cite>coio</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/error.html">Module <cite>error</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/fiber.html">Module <cite>fiber</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/box_index.html">Module <cite>index</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/latch.html">Module <cite>latch</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/utils.html">Module <cite>lua/utils</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/say.html">Module <cite>say</cite> (logging)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/schema.html">Module <cite>schema</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/trivia.html">Module <cite>trivia/config</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/tuple.html">Module <cite>tuple</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/txn.html">Module <cite>txn</cite></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/index.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/intro.html">What documentation there is</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/building_from_source.html">Building from source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/building_documentation.html">Building documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/developer_guidelines.html">Developer guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/developer_guidelines.html#how-to-work-on-a-bug">How to work on a bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/documentation_guidelines.html">Documentation guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#markup-issues">Markup issues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#wrapping-text">Wrapping text</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#formatting-code-snippets">Formatting code snippets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#using-separated-links">Using separated links</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#creating-labels-for-local-links">Creating labels for local links</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#making-comments">Making comments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#language-and-style-issues">Language and style issues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#us-vs-british-spelling">US vs British spelling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#examples-and-templates">Examples and templates</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#module-and-function">Module and function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#module-class-and-method">Module, class and method</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/box_protocol.html">Tarantool's binary protocol</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/box_protocol.html#notion-in-diagrams">Notion in diagrams</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/box_protocol.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/box_protocol.html#greeting-packet">Greeting Packet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/box_protocol.html#unified-packet-structure">Unified packet structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/box_protocol.html#authentication">Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/box_protocol.html#requests">Requests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/box_protocol.html#response-packet-structure">Response packet structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/box_protocol.html#replication-packet-structure">Replication packet structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/box_protocol.html#xlog-snap">XLOG / SNAP</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/c_style_guide.html">C Style Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/c_style_guide.html#general-guidelines">General guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#commenting-style">Commenting style</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#header-files">Header files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#allocating-memory">Allocating memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#other">Other</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/c_style_guide.html#linux-kernel-coding-style">Linux kernel coding style</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-1-indentation">Chapter 1: Indentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-2-breaking-long-lines-and-strings">Chapter 2: Breaking long lines and strings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-3-placing-braces-and-spaces">Chapter 3: Placing Braces and Spaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-3-1-spaces">Chapter 3.1:  Spaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-4-naming">Chapter 4: Naming</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-5-typedefs">Chapter 5: Typedefs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-6-functions">Chapter 6: Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-7-centralized-exiting-of-functions">Chapter 7: Centralized exiting of functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-8-commenting">Chapter 8: Commenting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-9-you-ve-made-a-mess-of-it">Chapter 9: You've made a mess of it</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-10-kconfig-configuration-files">Chapter 10: Kconfig configuration files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-11-data-structures">Chapter 11: Data structures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-12-macros-enums-and-rtl">Chapter 12: Macros, Enums and RTL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-13-printing-kernel-messages">Chapter 13: Printing kernel messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-14-allocating-memory">Chapter 14: Allocating memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-15-the-inline-disease">Chapter 15: The inline disease</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-16-function-return-values-and-names">Chapter 16: Function return values and names</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-17-don-t-re-invent-the-kernel-macros">Chapter 17:  Don't re-invent the kernel macros</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-18-editor-modelines-and-other-cruft">Chapter 18:  Editor modelines and other cruft</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#appendix-i-references">Appendix I: References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/python_style_guide.html">Python Style Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/python_style_guide.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/python_style_guide.html#a-foolish-consistency-is-the-hobgoblin-of-little-minds">A Foolish Consistency is the Hobgoblin of Little Minds</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/python_style_guide.html#code-lay-out">Code lay-out</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#indentation">Indentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#tabs-or-spaces">Tabs or Spaces?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#maximum-line-length">Maximum Line Length</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#blank-lines">Blank Lines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#encodings-pep-263">Encodings (PEP 263)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#imports">Imports</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/python_style_guide.html#whitespace-in-expressions-and-statements">Whitespace in Expressions and Statements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#pet-peeves">Pet Peeves</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#other-recommendations">Other Recommendations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/python_style_guide.html#comments">Comments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#block-comments">Block Comments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#inline-comments">Inline Comments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#documentation-strings">Documentation Strings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/python_style_guide.html#version-bookkeeping">Version Bookkeeping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/python_style_guide.html#naming-conventions">Naming Conventions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#descriptive-naming-styles">Descriptive: Naming Styles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#prescriptive-naming-conventions">Prescriptive: Naming Conventions</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#names-to-avoid">Names to Avoid</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#package-and-module-names">Package and Module Names</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#class-names">Class Names</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#exception-names">Exception Names</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#global-variable-names">Global Variable Names</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#function-names">Function Names</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#function-and-method-arguments">Function and method arguments</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#method-names-and-instance-variables">Method Names and Instance Variables</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#constants">Constants</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#designing-for-inheritance">Designing for inheritance</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/python_style_guide.html#references">References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/python_style_guide.html#copyright">Copyright</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/release_management.html">Release management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/release_management.html#how-to-make-a-minor-release">How to make a minor release</a></li>
</ul>
</li>
</ul>
</li>
</ul>

      </div>
      <div class="b-cols_content_right">
        <div class="b-cols_content_right-slot">
  <div class="b-page_header">
    <ul class="b-path-list">
      <li class="b-path-list-item">
        <a href="../index.html"
           class="b-path-list-item-url">
          Documentation
        </a>
      </li>
      
        <li class="b-path-list-item">
          <a href="index.html"
             class="b-path-list-item-url b-ellipsis">
            Lua rocks reference
          </a>
        </li>
      
      
      <li class="b-path-list-item">
        <div title="SQL DBMS Modules" class="b-path_current b-ellipsis">
          SQL DBMS Modules
        </div>
      </li>
      
    </ul>
  </div>

  <div class="section" id="sql-dbms-modules">
<span id="dbms-modules"></span><h1>SQL DBMS Modules<a class="headerlink" href="#sql-dbms-modules" title="Permalink to this headline">¶</a></h1>
<p>The discussion here in the reference is about incorporating and using two
modules that have already been created: the &quot;SQL DBMS rocks&quot; for MySQL and
PostgreSQL.</p>
<p>To call another DBMS from Tarantool, the essential requirements are: another
DBMS, and Tarantool. The module which connects Tarantool to another DBMS may
be called a &quot;connector&quot;. Within the module there is a shared library which
may be called a &quot;driver&quot;.</p>
<p>Tarantool supplies DBMS connector modules with the module manager for Lua,
LuaRocks. So the connector modules may be called &quot;rocks&quot;.</p>
<p>The Tarantool rocks allow for connecting to an SQL server and executing SQL
statements the same way that a MySQL or PostgreSQL client does. The SQL
statements are visible as Lua methods. Thus Tarantool can serve as a &quot;MySQL Lua
Connector&quot; or &quot;PostgreSQL Lua Connector&quot;, which would be useful even if that was
all Tarantool could do. But of course Tarantool is also a DBMS, so the module
also is useful for any operations, such as database copying and accelerating,
which work best when the application can work on both SQL and Tarantool inside
the same Lua routine.
The methods for connect/select/insert/etc. are similar to the ones in the
<a class="reference internal" href="../reference_lua/net_box.html#net-box-module"><span class="std std-ref">net.box</span></a> module.</p>
<p>From a user's point of view the MySQL and PostgreSQL rocks are very similar, so
the following sections -- &quot;MySQL Example&quot; and &quot;PostgreSQL Example&quot; -- contain
some redundancy.</p>
<div class="section" id="mysql-example">
<span id="dbms-modules-mysql-example"></span><h2>MySQL Example<a class="headerlink" href="#mysql-example" title="Permalink to this headline">¶</a></h2>
<p>This example assumes that MySQL 5.5 or MySQL 5.6 or MySQL 5.7 has been installed.
Recent MariaDB versions will also work, the MariaDB C connector is used. The
package that matters most is the MySQL client developer package, typically named
something like libmysqlclient-dev. The file that matters most from this package
is libmysqlclient.so or a similar name. One can use <code class="docutils literal"><span class="pre">find</span></code> or <code class="docutils literal"><span class="pre">whereis</span></code> to
see what directories these files are installed in.</p>
<p>It will be necessary to install Tarantool's MySQL driver shared library, load
it, and use it to connect to a MySQL server. After that, one can pass any MySQL
statement to the server and receive results, including multiple result sets.</p>
<div class="section" id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<p>Check the instructions for <a class="reference internal" href="../book/user_guide_getting_started.html#user-guide-getting-started-downloading-and-installing-a-binary-package"><span class="std std-ref">Downloading and installing a binary package</span></a>
that apply for the environment where tarantool was installed. In addition to
installing <code class="docutils literal"><span class="pre">tarantool</span></code>, install <code class="docutils literal"><span class="pre">tarantool-dev</span></code>. For example, on Ubuntu, add
the line</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo apt-get install tarantool-dev
</pre></div>
</div>
<p>Now, for the MySQL driver shared library, there are two ways to install:</p>
<div class="section" id="with-luarocks">
<h4>With LuaRocks<a class="headerlink" href="#with-luarocks" title="Permalink to this headline">¶</a></h4>
<p>Begin by installing luarocks and making sure that tarantool is among the
upstream servers, as in the instructions on <a class="reference external" href="http://rocks.tarantool.org/">rocks.tarantool.org</a>, the
Tarantool luarocks page. Now execute this:</p>
<pre class="highlight literal-block">
luarocks install mysql [MYSQL_LIBDIR = <em>path</em>]
                       [MYSQL_INCDIR = <em>path</em>]
                       [--local]
</pre>
<p>For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>luarocks install mysql <span class="nv">MYSQL_LIBDIR</span><span class="o">=</span>/usr/local/mysql/lib
</pre></div>
</div>
<p>See also <a class="reference internal" href="../book/modules.html#modules"><span class="std std-ref">Modules</span></a>.</p>
</div>
<div class="section" id="with-github">
<h4>With GitHub<a class="headerlink" href="#with-github" title="Permalink to this headline">¶</a></h4>
<p>Go the site <a class="reference external" href="https://github.com/tarantool/mysql">github.com/tarantool/mysql</a>. Follow the instructions there, saying:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git clone https://github.com/tarantool/mysql.git
<span class="nb">cd</span> mysql <span class="o">&amp;&amp;</span> cmake . -DCMAKE_BUILD_TYPE<span class="o">=</span>RelWithDebInfo
make
make install
</pre></div>
</div>
<p>At this point it is a good idea to check that the installation produced a file
named <code class="docutils literal"><span class="pre">driver.so</span></code>, and to check that this file is on a directory that is
searched by the <code class="docutils literal"><span class="pre">require</span></code> request.</p>
</div>
</div>
<div class="section" id="connecting">
<h3>Connecting<a class="headerlink" href="#connecting" title="Permalink to this headline">¶</a></h3>
<p>Begin by making a <code class="docutils literal"><span class="pre">require</span></code> request for the mysql driver. We will assume that
the name is <code class="docutils literal"><span class="pre">mysql</span></code> in further examples.</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">mysql</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">mysql&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, say:</p>
<pre class="highlight literal-block">
<em>connection_name</em> = mysql.connect(<em>connection options</em>)
</pre>
<p>The connection-options parameter is a table. Possible options are:</p>
<ul class="simple">
<li><code class="samp docutils literal"><span class="pre">host</span> <span class="pre">=</span> <em><span class="pre">host-name</span></em></code> - string, default value = 'localhost'</li>
<li><code class="samp docutils literal"><span class="pre">port</span> <span class="pre">=</span> <em><span class="pre">port-number</span></em></code> - number, default value = 3306</li>
<li><code class="samp docutils literal"><span class="pre">user</span> <span class="pre">=</span> <em><span class="pre">user-name</span></em></code> - string, default value is operating-system user name</li>
<li><code class="samp docutils literal"><span class="pre">password</span> <span class="pre">=</span> <em><span class="pre">password</span></em></code> - string, default value is blank</li>
<li><code class="samp docutils literal"><span class="pre">db</span> <span class="pre">=</span> <em><span class="pre">database-name</span></em></code> - string, default value is blank</li>
<li><code class="samp docutils literal"><span class="pre">raise</span> <span class="pre">=</span> <em><span class="pre">true|false</span></em></code> - boolean, default value is false</li>
</ul>
<p>The option names, except for <cite>raise</cite>, are similar to the names that MySQL's
mysql client uses, for details see the MySQL manual at
<a class="reference external" href="https://dev.mysql.com/doc/refman/5.6/en/connecting.html">dev.mysql.com/doc/refman/5.6/en/connecting.html</a>.
The <cite>raise</cite> option should be set to <span class="ccode">true</span> if errors should be
raised when encountered. To connect with a Unix socket rather than with TCP,
specify <code class="docutils literal"><span class="pre">host</span> <span class="pre">=</span> <span class="pre">'unix/'</span></code> and <code class="samp docutils literal"><span class="pre">port</span> <span class="pre">=</span> <em><span class="pre">socket-name</span></em></code>.</p>
<p>Example, using a table literal enclosed in {braces}:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">conn</span> <span class="o">=</span> <span class="n">mysql</span><span class="p">.</span><span class="n">connect</span><span class="p">({</span>
    <span class="n">host</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">127.0.0.1&#39;</span><span class="p">,</span>
    <span class="n">port</span> <span class="o">=</span> <span class="mi">3306</span><span class="p">,</span>
    <span class="n">user</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">p&#39;</span><span class="p">,</span>
    <span class="n">password</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">p&#39;</span><span class="p">,</span>
    <span class="n">db</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">test&#39;</span><span class="p">,</span>
    <span class="n">raise</span> <span class="o">=</span> <span class="kc">true</span>
<span class="p">})</span>
<span class="c1">-- OR</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">mysql</span><span class="p">.</span><span class="n">connect</span><span class="p">({</span>
    <span class="n">host</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">unix/&#39;</span><span class="p">,</span>
    <span class="n">port</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">/var/run/mysqld/mysqld.sock&#39;</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Example, creating a function which sets each option in a separate line:</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="c1">-- Connection function. Usage: conn = mysql_connect()</span>
<span class="gp">tarantool&gt; </span><span class="k">function</span> <span class="nf">mysql_connection</span><span class="p">()</span>
<span class="gp">         &gt; </span>  <span class="kd">local</span> <span class="n">p</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">         &gt; </span>  <span class="n">p</span><span class="p">.</span><span class="n">host</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">widgets.com&#39;</span>
<span class="gp">         &gt; </span>  <span class="n">p</span><span class="p">.</span><span class="n">db</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">test&#39;</span>
<span class="gp">         &gt; </span>  <span class="n">conn</span> <span class="o">=</span> <span class="n">mysql</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="gp">         &gt; </span>  <span class="k">return</span> <span class="n">conn</span>
<span class="gp">         &gt; </span><span class="k">end</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">conn</span> <span class="o">=</span> <span class="n">mysql_connect</span><span class="p">()</span>
<span class="nn">---</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>We will assume that the name is 'conn' in further examples.</p>
</div>
<div class="section" id="how-to-ping">
<h3>How to ping<a class="headerlink" href="#how-to-ping" title="Permalink to this headline">¶</a></h3>
<p>To ensure that a connection is working, the request is:</p>
<pre class="highlight literal-block">
<em>connection-name</em>:ping()
</pre>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">conn</span><span class="p">:</span><span class="n">ping</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nn">...</span>
</pre></div>
</div>
</div>
<div class="section" id="executing-a-statement">
<h3>Executing a statement<a class="headerlink" href="#executing-a-statement" title="Permalink to this headline">¶</a></h3>
<p>For all MySQL statements, the request is:</p>
<pre class="highlight literal-block">
<em>connection-name</em>:execute(<em>sql-statement</em> [, <em>parameters</em>])
</pre>
<p>where <code class="docutils literal"><span class="pre">sql-statement</span></code> is a string, and the optional <code class="docutils literal"><span class="pre">parameters</span></code> are extra
values that can be plugged in to replace any question marks (&quot;?&quot;s) in the SQL
statement.</p>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">conn</span><span class="p">:</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">select table_name from information_schema.tables&#39;</span><span class="p">)</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">table_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ALL_PLUGINS</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">table_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">APPLICABLE_ROLES</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">table_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">CHARACTER_SETS</span>
  <span class="l l-Scalar l-Scalar-Plain">&lt;...&gt;</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">78</span>
<span class="nn">...</span>
</pre></div>
</div>
</div>
<div class="section" id="closing-connection">
<h3>Closing connection<a class="headerlink" href="#closing-connection" title="Permalink to this headline">¶</a></h3>
<p>To end a session that began with <code class="docutils literal"><span class="pre">mysql.connect</span></code>, the request is:</p>
<pre class="highlight literal-block">
<em>connection-name</em>:close()
</pre>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">conn</span><span class="p">:</span><span class="n">close</span><span class="p">()</span>
<span class="nn">---</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>For further information, including examples of rarely-used requests, see the
README.md file at <a class="reference external" href="https://github.com/tarantool/mysql">github.com/tarantool/mysql</a>.</p>
</div>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>The example was run on an Ubuntu 12.04 (&quot;precise&quot;) machine where tarantool had
been installed in a /usr subdirectory, and a copy of MySQL had been installed
on ~/mysql-5.5. The mysqld server is already running on the local host 127.0.0.1.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">export</span> <span class="nv">TMDIR</span><span class="o">=</span>~/mysql-5.5
<span class="gp">$</span> <span class="c1"># Check that the include subdirectory exists by looking</span>
<span class="gp">$</span> <span class="c1"># for .../include/mysql.h. (If this fails, there&#39;s a chance</span>
<span class="gp">$</span> <span class="c1"># that it&#39;s in .../include/mysql/mysql.h instead.)</span>
<span class="gp">$</span> <span class="o">[</span> -f <span class="nv">$TMDIR</span>/include/mysql.h <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;OK&quot;</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s2">&quot;Error&quot;</span>
<span class="go">OK</span>

<span class="gp">$</span> <span class="c1"># Check that the library subdirectory exists and has the</span>
<span class="gp">$</span> <span class="c1"># necessary .so file.</span>
<span class="gp">$</span> <span class="o">[</span> -f <span class="nv">$TMDIR</span>/lib/libmysqlclient.so <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;OK&quot;</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s2">&quot;Error&quot;</span>
<span class="go">OK</span>

<span class="gp">$</span> <span class="c1"># Check that the mysql client can connect using some factory</span>
<span class="gp">$</span> <span class="c1"># defaults: port = 3306, user = &#39;root&#39;, user password = &#39;&#39;,</span>
<span class="gp">$</span> <span class="c1"># database = &#39;test&#39;. These can be changed, provided one uses</span>
<span class="gp">$</span> <span class="c1"># the changed values in all places.</span>
<span class="gp">$</span> <span class="nv">$TMDIR</span>/bin/mysql --port<span class="o">=</span><span class="m">3306</span> -h 127.0.0.1 --user<span class="o">=</span>root <span class="se">\</span>
<span class="go">    --password= --database=test</span>
<span class="go">Welcome to the MySQL monitor.  Commands end with ; or \g.</span>
<span class="go">Your MySQL connection id is 25</span>
<span class="go">Server version: 5.5.35 MySQL Community Server (GPL)</span>
<span class="go">...</span>
<span class="go">Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear ...</span>

<span class="gp">$</span> <span class="c1"># Insert a row in database test, and quit.</span>
<span class="go">mysql&gt; CREATE TABLE IF NOT EXISTS test (s1 INT, s2 VARCHAR(50));</span>
<span class="go">Query OK, 0 rows affected (0.13 sec)</span>
<span class="go">mysql&gt; INSERT INTO test.test VALUES (1,&#39;MySQL row&#39;);</span>
<span class="go">Query OK, 1 row affected (0.02 sec)</span>
<span class="go">mysql&gt; QUIT</span>
<span class="go">Bye</span>

<span class="gp">$</span> <span class="c1"># Install luarocks</span>
<span class="gp">$</span> sudo apt-get -y install luarocks <span class="p">|</span> grep -E <span class="s2">&quot;Setting up|already&quot;</span>
<span class="go">Setting up luarocks (2.0.8-2) ...</span>

<span class="gp">$</span> <span class="c1"># Set up the Tarantool rock list in ~/.luarocks,</span>
<span class="gp">$</span> <span class="c1"># following instructions at rocks.tarantool.org</span>
<span class="gp">$</span> mkdir ~/.luarocks
<span class="gp">$</span> <span class="nb">echo</span> <span class="s2">&quot;rocks_servers = {[[http://rocks.tarantool.org/]]}&quot;</span> &gt;&gt; <span class="se">\</span>
<span class="go">    ~/.luarocks/config.lua</span>

<span class="gp">$</span> <span class="c1"># Ensure that the next &quot;install&quot; will get files from Tarantool</span>
<span class="gp">$</span> <span class="c1"># master repository. The resultant display is normal for Ubuntu</span>
<span class="gp">$</span> <span class="c1"># 12.04 precise</span>
<span class="gp">$</span> cat /etc/apt/sources.list.d/tarantool.list
<span class="go">deb http://tarantool.org/dist/1.7/ubuntu/ precise main</span>
<span class="go">deb-src http://tarantool.org/dist/1.7/ubuntu/ precise main</span>

<span class="gp">$</span> <span class="c1"># Install tarantool-dev. The displayed line should show version = 1.6</span>
<span class="gp">$</span> sudo apt-get -y install tarantool-dev <span class="p">|</span> grep -E <span class="s2">&quot;Setting up|already&quot;</span>
<span class="go">Setting up tarantool-dev (1.6.6.222.g48b98bb~precise-1) ...</span>
<span class="gp">$</span>

<span class="gp">$</span> <span class="c1"># Use luarocks to install locally, that is, relative to $HOME</span>
<span class="gp">$</span> luarocks install mysql <span class="nv">MYSQL_LIBDIR</span><span class="o">=</span>/usr/local/mysql/lib --local
<span class="go">Installing http://rocks.tarantool.org/mysql-scm-1.rockspec...</span>
<span class="go">... (more info about building the Tarantool/MySQL driver appears here)</span>
<span class="go">mysql scm-1 is now built and installed in ~/.luarocks/</span>

<span class="gp">$</span> <span class="c1"># Ensure driver.so now has been created in a place</span>
<span class="gp">$</span> <span class="c1"># tarantool will look at</span>
<span class="gp">$</span> find ~/.luarocks -name <span class="s2">&quot;driver.so&quot;</span>
<span class="go">~/.luarocks/lib/lua/5.1/mysql/driver.so</span>

<span class="gp">$</span> <span class="c1"># Change directory to a directory which can be used for</span>
<span class="gp">$</span> <span class="c1"># temporary tests. For this example we assume that the name</span>
<span class="gp">$</span> <span class="c1"># of this directory is /home/pgulutzan/tarantool_sandbox.</span>
<span class="gp">$</span> <span class="c1"># (Change &quot;/home/pgulutzan&quot; to whatever is the user&#39;s actual</span>
<span class="gp">$</span> <span class="c1"># home directory for the machine that&#39;s used for this test.)</span>
<span class="gp">$</span> <span class="nb">cd</span> /home/pgulutzan/tarantool_sandbox

<span class="gp">$</span> <span class="c1"># Start the Tarantool server. Do not use a Lua initialization file.</span>

<span class="gp">$</span> tarantool
<span class="go">tarantool: version 1.7.0-222-g48b98bb</span>
<span class="go">type &#39;help&#39; for interactive help</span>
<span class="go">tarantool&gt;</span>
</pre></div>
</div>
<p>Configure tarantool and load mysql module. Make sure that tarantool doesn't
reply &quot;error&quot; for the call to &quot;require()&quot;.</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">box</span><span class="p">.</span><span class="n">cfg</span><span class="p">{}</span>
<span class="go">...</span>
<span class="gp">tarantool&gt; </span><span class="n">mysql</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">mysql&#39;</span><span class="p">)</span>
<span class="nn">---</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>Create a Lua function that will connect to the MySQL server, (using some factory
default values for the port and user and password), retrieve one row, and
display the row. For explanations of the statement types used here, read the
Lua tutorial earlier in the Tarantool user manual.</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="k">function</span> <span class="nf">mysql_select</span> <span class="p">()</span>
<span class="gp">         &gt; </span>  <span class="kd">local</span> <span class="n">conn</span> <span class="o">=</span> <span class="n">mysql</span><span class="p">.</span><span class="n">connect</span><span class="p">({</span>
<span class="gp">         &gt; </span>    <span class="n">host</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">127.0.0.1&#39;</span><span class="p">,</span>
<span class="gp">         &gt; </span>    <span class="n">port</span> <span class="o">=</span> <span class="mi">3306</span><span class="p">,</span>
<span class="gp">         &gt; </span>    <span class="n">user</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">root&#39;</span><span class="p">,</span>
<span class="gp">         &gt; </span>    <span class="n">db</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">test&#39;</span>
<span class="gp">         &gt; </span>  <span class="p">})</span>
<span class="gp">         &gt; </span>  <span class="kd">local</span> <span class="n">test</span> <span class="o">=</span> <span class="n">conn</span><span class="p">:</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">SELECT * FROM test WHERE s1 = 1&#39;</span><span class="p">)</span>
<span class="gp">         &gt; </span>  <span class="kd">local</span> <span class="n">row</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">&#39;</span>
<span class="gp">         &gt; </span>  <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">card</span> <span class="k">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">test</span><span class="p">)</span> <span class="k">do</span>
<span class="gp">         &gt; </span>      <span class="n">row</span> <span class="o">=</span> <span class="n">row</span> <span class="o">..</span> <span class="n">card</span><span class="p">.</span><span class="n">s2</span> <span class="o">..</span> <span class="s1">&#39;</span><span class="s"> &#39;</span>
<span class="gp">         &gt; </span>      <span class="k">end</span>
<span class="gp">         &gt; </span>  <span class="n">conn</span><span class="p">:</span><span class="n">close</span><span class="p">()</span>
<span class="gp">         &gt; </span>  <span class="k">return</span> <span class="n">row</span>
<span class="gp">         &gt; </span><span class="k">end</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">mysql_select</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="s">&#39;MySQL</span><span class="nv"> </span><span class="s">row</span><span class="nv"> </span><span class="s">&#39;</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>Observe the result. It contains &quot;MySQL row&quot;. So this is the row that was inserted
into the MySQL database. And now it's been selected with the Tarantool client.</p>
</div>
</div>
<div class="section" id="postgresql-example">
<span id="dbms-modules-postgresql-example"></span><h2>PostgreSQL Example<a class="headerlink" href="#postgresql-example" title="Permalink to this headline">¶</a></h2>
<p>This example assumes that PostgreSQL 8 or PostgreSQL 9 has been installed. More
recent versions should also work. The package that matters most is the
PostgreSQL developer package, typically named something like libpq-dev. On
Ubuntu this can be installed with:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo apt-get install libpq-dev
</pre></div>
</div>
<p>However, because not all platforms are alike, for this example the assumption
is that the user must check that the appropriate PostgreSQL files are present
and must explicitly state where they are when building the Tarantool/PostgreSQL
driver. One can use <code class="docutils literal"><span class="pre">find</span></code> or <code class="docutils literal"><span class="pre">whereis</span></code> to see what directories
PostgreSQL files are installed in.</p>
<p>It will be necessary to install Tarantool's PostgreSQL driver shared library,
load it, and use it to connect to a PostgreSQL server. After that, one can pass
any PostgreSQL statement to the server and receive results.</p>
<div class="section" id="id1">
<h3>Installation<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Check the instructions for
<a class="reference internal" href="../book/user_guide_getting_started.html#user-guide-getting-started-downloading-and-installing-a-binary-package"><span class="std std-ref">Downloading and installing a binary package</span></a>
that apply for the environment where tarantool was installed. In addition to
installing <code class="docutils literal"><span class="pre">tarantool</span></code>, install <code class="docutils literal"><span class="pre">tarantool-dev</span></code>. For example, on Ubuntu, add
the line:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo apt-get install tarantool-dev
</pre></div>
</div>
<p>Now, for the PostgreSQL driver shared library, there are two ways to install:</p>
<div class="section" id="id2">
<h4>With LuaRocks<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>Begin by installing luarocks and making sure that tarantool is among the upstream
servers, as in the instructions on <a class="reference external" href="http://rocks.tarantool.org/">rocks.tarantool.org</a>, the Tarantool luarocks
page. Now execute this:</p>
<pre class="highlight literal-block">
luarocks install pg [POSTGRESQL_LIBDIR = <em>path</em>]
                    [POSTGRESQL_INCDIR = <em>path</em>]
                    [--local]
</pre>
<p>For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>luarocks install pg <span class="nv">POSTGRESQL_LIBDIR</span><span class="o">=</span>/usr/local/postgresql/lib
</pre></div>
</div>
<p>See also <a class="reference internal" href="../book/modules.html#modules"><span class="std std-ref">Modules</span></a>.</p>
</div>
<div class="section" id="id3">
<h4>With GitHub<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>Go the site <a class="reference external" href="https://github.com/tarantool/pg">github.com/tarantool/pg</a>. Follow the instructions there, saying:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git clone https://github.com/tarantool/pg.git
<span class="nb">cd</span> pg <span class="o">&amp;&amp;</span> cmake . -DCMAKE_BUILD_TYPE<span class="o">=</span>RelWithDebInfo
make
make install
</pre></div>
</div>
<p>At this point it is a good idea to check that the installation produced a file
named <code class="docutils literal"><span class="pre">driver.so</span></code>, and to check that this file is on a directory that is
searched by the <code class="docutils literal"><span class="pre">require</span></code> request.</p>
</div>
</div>
<div class="section" id="id4">
<h3>Connecting<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Begin by making a <code class="docutils literal"><span class="pre">require</span></code> request for the pg driver. We will assume that the
name is <code class="docutils literal"><span class="pre">pg</span></code> in further examples.</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">pg</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">pg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, say:</p>
<pre class="highlight literal-block">
<em>connection_name</em> = pg.connect(<em>connection options</em>)
</pre>
<p>The connection-options parameter is a table. Possible options are:</p>
<ul class="simple">
<li><code class="samp docutils literal"><span class="pre">host</span> <span class="pre">=</span> <em><span class="pre">host-name</span></em></code> - string, default value = 'localhost'</li>
<li><code class="samp docutils literal"><span class="pre">port</span> <span class="pre">=</span> <em><span class="pre">port-number</span></em></code> - number, default value = 3306</li>
<li><code class="samp docutils literal"><span class="pre">user</span> <span class="pre">=</span> <em><span class="pre">user-name</span></em></code> - string, default value is operating-system user name</li>
<li><code class="samp docutils literal"><span class="pre">pass</span> <span class="pre">=</span> <em><span class="pre">password</span></em></code> or <code class="samp docutils literal"><span class="pre">password</span> <span class="pre">=</span> <em><span class="pre">password</span></em></code> - string, default value is blank</li>
<li><code class="samp docutils literal"><span class="pre">db</span> <span class="pre">=</span> <em><span class="pre">database-name</span></em></code> - string, default value is blank</li>
</ul>
<p>The names are similar to the names that PostgreSQL itself uses.</p>
<p>Example, using a table literal enclosed in {braces}:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">conn</span> <span class="o">=</span> <span class="n">pg</span><span class="p">.</span><span class="n">connect</span><span class="p">({</span>
    <span class="n">host</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">127.0.0.1&#39;</span><span class="p">,</span>
    <span class="n">port</span> <span class="o">=</span> <span class="mi">5432</span><span class="p">,</span>
    <span class="n">user</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">p&#39;</span><span class="p">,</span>
    <span class="n">password</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">p&#39;</span><span class="p">,</span>
    <span class="n">db</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">test&#39;</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Example, creating a function which sets each option in a separate line:</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="k">function</span> <span class="nf">pg_connect</span><span class="p">()</span>
<span class="gp">         &gt; </span>  <span class="kd">local</span> <span class="n">p</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">         &gt; </span>  <span class="n">p</span><span class="p">.</span><span class="n">host</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">widgets.com&#39;</span>
<span class="gp">         &gt; </span>  <span class="n">p</span><span class="p">.</span><span class="n">db</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">test&#39;</span>
<span class="gp">         &gt; </span>  <span class="n">p</span><span class="p">.</span><span class="n">user</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">postgres&#39;</span>
<span class="gp">         &gt; </span>  <span class="n">p</span><span class="p">.</span><span class="n">password</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">postgres&#39;</span>
<span class="gp">         &gt; </span>  <span class="kd">local</span> <span class="n">conn</span> <span class="o">=</span> <span class="n">pg</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="gp">         &gt; </span>  <span class="k">return</span> <span class="n">conn</span>
<span class="gp">         &gt; </span><span class="k">end</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">conn</span> <span class="o">=</span> <span class="n">pg_connect</span><span class="p">()</span>
<span class="nn">---</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>We will assume that the name is 'conn' in further examples.</p>
</div>
<div class="section" id="id5">
<h3>How to ping<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>To ensure that a connection is working, the request is:</p>
<pre class="highlight literal-block">
<em>connection-name</em>:ping()
</pre>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">conn</span><span class="p">:</span><span class="n">ping</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nn">...</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h3>Executing a statement<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>For all PostgreSQL statements, the request is:</p>
<pre class="highlight literal-block">
<em>connection-name</em>:execute(<em>sql-statement</em> [, <em>parameters</em>])
</pre>
<p>where <code class="docutils literal"><span class="pre">sql-statement</span></code> is a string, and the optional <code class="docutils literal"><span class="pre">parameters</span></code>
are extra values that can be plugged in to replace any question marks (&quot;?&quot;s)
in the SQL statement.</p>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">conn</span><span class="p">:</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">select tablename from pg_tables&#39;</span><span class="p">)</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">tablename</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">pg_statistic</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">tablename</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">pg_type</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">tablename</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">pg_authid</span>
  <span class="l l-Scalar l-Scalar-Plain">&lt;...&gt;</span>
<span class="nn">...</span>
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h3>Closing connection<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>To end a session that began with <code class="docutils literal"><span class="pre">pg.connect</span></code>, the request is:</p>
<pre class="highlight literal-block">
<em>connection-name</em>:close()
</pre>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">conn</span><span class="p">:</span><span class="n">close</span><span class="p">()</span>
<span class="nn">---</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>For further information, including examples of rarely-used requests, see the
README.md file at <a class="reference external" href="https://github.com/tarantool/pg">github.com/tarantool/pg</a>.</p>
</div>
<div class="section" id="id8">
<h3>Example<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>The example was run on an Ubuntu 12.04 (&quot;precise&quot;) machine where tarantool had
been installed in a /usr subdirectory, and a copy of PostgreSQL had been installed
on /usr. The PostgreSQL server is already running on the local host 127.0.0.1.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="c1"># Check that the include subdirectory exists</span>
<span class="gp">$</span> <span class="c1"># by looking for /usr/include/postgresql/libpq-fe-h.</span>
<span class="gp">$</span> <span class="o">[</span> -f /usr/include/postgresql/libpq-fe.h <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;OK&quot;</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s2">&quot;Error&quot;</span>
<span class="go">OK</span>

<span class="gp">$</span> <span class="c1"># Check that the library subdirectory exists and has the necessary .so file.</span>
<span class="gp">$</span> <span class="o">[</span> -f /usr/lib/x86_64-linux-gnu/libpq.so <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;OK&quot;</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s2">&quot;Error&quot;</span>
<span class="go">OK</span>

<span class="gp">$</span> <span class="c1"># Check that the psql client can connect using some factory defaults:</span>
<span class="gp">$</span> <span class="c1"># port = 5432, user = &#39;postgres&#39;, user password = &#39;postgres&#39;,</span>
<span class="gp">$</span> <span class="c1"># database = &#39;postgres&#39;. These can be changed, provided one changes</span>
<span class="gp">$</span> <span class="c1"># them in all places. Insert a row in database postgres, and quit.</span>
<span class="gp">$</span> psql -h 127.0.0.1 -p <span class="m">5432</span> -U postgres -d postgres
<span class="go">Password for user postgres:</span>
<span class="go">psql (9.3.10)</span>
<span class="go">SSL connection (cipher: DHE-RSA-AES256-SHA, bits: 256)</span>
<span class="go">Type &quot;help&quot; for help.</span>

<span class="go">postgres=# CREATE TABLE test (s1 INT, s2 VARCHAR(50));</span>
<span class="go">CREATE TABLE</span>
<span class="go">postgres=# INSERT INTO test VALUES (1,&#39;PostgreSQL row&#39;);</span>
<span class="go">INSERT 0 1</span>
<span class="go">postgres=# \q</span>
<span class="gp">$</span>

<span class="gp">$</span> <span class="c1"># Install luarocks</span>
<span class="gp">$</span> sudo apt-get -y install luarocks <span class="p">|</span> grep -E <span class="s2">&quot;Setting up|already&quot;</span>
<span class="go">Setting up luarocks (2.0.8-2) ...</span>

<span class="gp">$</span> <span class="c1"># Set up the Tarantool rock list in ~/.luarocks,</span>
<span class="gp">$</span> <span class="c1"># following instructions at rocks.tarantool.org</span>
<span class="gp">$</span> mkdir ~/.luarocks
<span class="gp">$</span> <span class="nb">echo</span> <span class="s2">&quot;rocks_servers = {[[http://rocks.tarantool.org/]]}&quot;</span> &gt;&gt; <span class="se">\</span>
<span class="go">        ~/.luarocks/config.lua</span>

<span class="gp">$</span> <span class="c1"># Ensure that the next &quot;install&quot; will get files from Tarantool master</span>
<span class="gp">$</span> <span class="c1"># repository. The resultant display is normal for Ubuntu 12.04 precise</span>
<span class="gp">$</span> cat /etc/apt/sources.list.d/tarantool.list
<span class="go">deb http://tarantool.org/dist/1.7/ubuntu/ precise main</span>
<span class="go">deb-src http://tarantool.org/dist/1.7/ubuntu/ precise main</span>

<span class="gp">$</span> <span class="c1"># Install tarantool-dev. The displayed line should show version = 1.7</span>
<span class="gp">$</span> sudo apt-get -y install tarantool-dev <span class="p">|</span> grep -E <span class="s2">&quot;Setting up|already&quot;</span>
<span class="go">Setting up tarantool-dev (1.7.0.222.g48b98bb~precise-1) ...</span>
<span class="gp">$</span>

<span class="gp">$</span> <span class="c1"># Use luarocks to install locally, that is, relative to $HOME</span>
<span class="gp">$</span> luarocks install pg <span class="nv">POSTGRESQL_LIBDIR</span><span class="o">=</span>/usr/lib/x86_64-linux-gnu --local
<span class="go">Installing http://rocks.tarantool.org/pg-scm-1.rockspec...</span>
<span class="go">... (more info about building the Tarantool/PostgreSQL driver appears here)</span>
<span class="go">pg scm-1 is now built and installed in ~/.luarocks/</span>

<span class="gp">$</span> <span class="c1"># Ensure driver.so now has been created in a place</span>
<span class="gp">$</span> <span class="c1"># tarantool will look at</span>
<span class="gp">$</span> find ~/.luarocks -name <span class="s2">&quot;driver.so&quot;</span>
<span class="go">~/.luarocks/lib/lua/5.1/pg/driver.so</span>

<span class="gp">$</span> <span class="c1"># Change directory to a directory which can be used for</span>
<span class="gp">$</span> <span class="c1"># temporary tests. For this example we assume that the</span>
<span class="gp">$</span> <span class="c1"># name of this directory is $HOME/tarantool_sandbox.</span>
<span class="gp">$</span> <span class="c1"># (Change &quot;$HOME&quot; to whatever is the user&#39;s actual</span>
<span class="gp">$</span> <span class="c1"># home directory for the machine that&#39;s used for this test.)</span>
<span class="go">cd $HOME/tarantool_sandbox</span>

<span class="gp">$</span> <span class="c1"># Start the Tarantool server. Do not use a Lua initialization file.</span>

<span class="gp">$</span> tarantool
<span class="go">tarantool: version 1.7.0-412-g803b15c</span>
<span class="go">type &#39;help&#39; for interactive help</span>
<span class="go">tarantool&gt;</span>
</pre></div>
</div>
<p>Configure tarantool and load pg module. Make sure that tarantool doesn't
reply &quot;error&quot; for the call to &quot;require()&quot;.</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">box</span><span class="p">.</span><span class="n">cfg</span><span class="p">{}</span>
<span class="go">...</span>
<span class="gp">tarantool&gt; </span><span class="n">pg</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">pg&#39;</span><span class="p">)</span>
<span class="nn">---</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>Create a Lua function that will connect to the PostgreSQL server, (using some
factory default values for the port and user and password), retrieve one row,
and display the row. For explanations of the statement types used here, read the
Lua tutorial earlier in the Tarantool user manual.</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="k">function</span> <span class="nf">pg_select</span> <span class="p">()</span>
<span class="gp">         &gt; </span>  <span class="kd">local</span> <span class="n">conn</span> <span class="o">=</span> <span class="n">pg</span><span class="p">.</span><span class="n">connect</span><span class="p">({</span>
<span class="gp">         &gt; </span>    <span class="n">host</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">127.0.0.1&#39;</span><span class="p">,</span>
<span class="gp">         &gt; </span>    <span class="n">port</span> <span class="o">=</span> <span class="mi">5432</span><span class="p">,</span>
<span class="gp">         &gt; </span>    <span class="n">user</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">postgres&#39;</span><span class="p">,</span>
<span class="gp">         &gt; </span>    <span class="n">password</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">postgres&#39;</span><span class="p">,</span>
<span class="gp">         &gt; </span>    <span class="n">db</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">postgres&#39;</span>
<span class="gp">         &gt; </span>  <span class="p">})</span>
<span class="gp">         &gt; </span>  <span class="kd">local</span> <span class="n">test</span> <span class="o">=</span> <span class="n">conn</span><span class="p">:</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">SELECT * FROM test WHERE s1 = 1&#39;</span><span class="p">)</span>
<span class="gp">         &gt; </span>  <span class="kd">local</span> <span class="n">row</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">&#39;</span>
<span class="gp">         &gt; </span>  <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">card</span> <span class="k">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">test</span><span class="p">)</span> <span class="k">do</span>
<span class="gp">         &gt; </span>      <span class="n">row</span> <span class="o">=</span> <span class="n">row</span> <span class="o">..</span> <span class="n">card</span><span class="p">.</span><span class="n">s2</span> <span class="o">..</span> <span class="s1">&#39;</span><span class="s"> &#39;</span>
<span class="gp">         &gt; </span>      <span class="k">end</span>
<span class="gp">         &gt; </span>  <span class="n">conn</span><span class="p">:</span><span class="n">close</span><span class="p">()</span>
<span class="gp">         &gt; </span>  <span class="k">return</span> <span class="n">row</span>
<span class="gp">         &gt; </span><span class="k">end</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">pg_select</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="s">&#39;PostgreSQL</span><span class="nv"> </span><span class="s">row</span><span class="nv"> </span><span class="s">&#39;</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>Observe the result. It contains &quot;PostgreSQL row&quot;. So this is the row that was
inserted into the PostgreSQL database. And now it's been selected with the
Tarantool client.</p>
</div>
</div>
</div>


          
          
  <div id="disqus_thread"></div>
  <script>
    // DON'T EDIT
    (function() {
        var d = document, s = d.createElement('script');
        s.src = '//tarantooldb.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>
    Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript" rel="nofollow">
      comments powered by Disqus.
    </a>
  </noscript>

          
  
    
      <div class="b-page_over-tail">
    
    
      <div class="b-page_over-prev">
        <a href="index.html"
           class="b-prev b-ellipsis"
           title="Lua rocks reference">Lua rocks reference</a>
      </div>
    
    <div class="b-page_over-lang">
      <ul class="b-page_over-lang-list">
        <li class="b-page_over-lang-item">
          <a href="../_sources/reference_rock/dbms.txt"
             class="b-page_over-lang-url"> Source </a>
        </li>
      </ul>
    </div>
    
      <div class="b-page_over-next">
        <a href="expirationd.html"
           class="b-next b-ellipsis"
           title="Module &lt;cite&gt;expirationd&lt;/cite&gt;">Module <cite>expirationd</cite></a>
      </div>
    
    </div>
  
</div>
      </div>
    </div>
  

      </div>
    </div>

  <!-- FOOTER > -->
  
<footer class="b-footer">
  <div class="b-footer-wrapper">
    <nav class="b-footer_menu">
      
  <ul class="b-menu">
    
      <li class="b-menu-item">
        <a href="/" class="b-menu-item-url">Overview</a>
      </li>
    
      <li class="b-menu-item">
        <a href="http://try.tarantool.org" class="b-menu-item-url">Try</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/doc/" class="b-menu-item-url">Documentation</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/download.html" class="b-menu-item-url">Download</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/careers.html" class="b-menu-item-url">Careers</a>
      </li>
    
      <li class="b-menu-item">
        <a href="http://rocks.tarantool.org" class="b-menu-item-url">Rocks</a>
      </li>
    
  </ul>

      <div class="b-footer-other">
        <a href="http://15.tarantool.org">1.5 web site and downloads</a>
      </div>
    </nav>
  </div>
</footer>

  <!-- < FOOTER -->
  <div id="mobile-checker"></div>
  </body>
</html>

