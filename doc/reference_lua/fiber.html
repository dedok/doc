





<!doctype html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Module fiber</title>
    <link rel="icon" type="image/png" sizes="192x192"
          href="/theme/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32"
          href="/theme/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96"
          href="/theme/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16"
          href="/theme/favicon/favicon-16x16.png">
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:       '',
        VERSION:        '1.7.1',
        COLLAPSE_INDEX:  false,
        FILE_SUFFIX:    '.html',
        HAS_SOURCE:      true
      };
      
      
      var disqus_config = function () {
          // Replace PAGE_URL with your page's canonical URL variable
          // this.page.url = PAGE_URL;
          this.page.identifier = "reference_lua/fiber";
          this.language = "en"
      };
    </script>
    <script id="dsq-count-scr" src="https://tarantooldb.disqus.com/count.js" async/></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/jquery.pin.min.js"></script>
    <script type="text/javascript" src="../_static/headers.js"></script>
    <script type="text/javascript" src="../_static/jquery-ui.js"></script>
    <script type="text/javascript" src="/js/menu.js"></script>
    <script type="text/javascript" src="/js/mobile_menu.js"></script>
    <link rel="stylesheet" href="/theme/font-awesome.min.css">
    <link rel="stylesheet" href="/theme/design.css">
    <link rel="stylesheet" href="/theme/pygmentize.css">
    <link rel="stylesheet" href="../_static/sphinx_design.css">
    <link rel="stylesheet" href="../_static/jquery-ui.css">
     
    <!--[if lt IE 9]>
      <script src="/js/ie8.js"></script>
      <link rel="stylesheet" href="/theme/ie8.css" />
    <![endif]-->
    <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-22120502-1', 'auto');
  ga('send', 'pageview');
</script>

<!-- Rating@Mail.ru counter -->
<script type="text/javascript">
  var _tmr = _tmr || [];
  _tmr.push({id: "2284916", type: "pageView", start: (new Date()).getTime()});
  (function (d, w) {
    var ts = d.createElement("script"); ts.type = "text/javascript"; ts.async = true;
    ts.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//top-fwz1.mail.ru/js/code.js";
    var f = function () {var s = d.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ts, s);};
    if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); }
  })(document, window);
</script>
<noscript>
  <div style="position:absolute;left:-10000px;">
    <img src="//top-fwz1.mail.ru/counter?id=2284916;js=na" style="border:0;"
         height="1" width="1" alt="Рейтинг@Mail.ru" />
  </div>
</noscript>
<!-- //Rating@Mail.ru counter -->


  </head>
  
  <body class="p-cols_design b-doc-reference_lua/fiber">
  
    <div class="b-wrapper">
      <!-- HEADER > -->
      
  <header class="b-header">
    <div class="b-header_menu_mobile">
      <div class="b-burger-button">
        <span></span>
      </div>
      <form role="search" class="b-header-search" action="../search.html" method="get">
        <input name="q" type="search">
      </form>
    </div>
    <div class="b-menu_mobile">
      <div class="b-menu_mobile__wrapper">
        <nav class="b-header_menu">
          
  <ul class="b-menu">
    
      <li class="b-menu-item">
        <a href="/" class="b-menu-item-url">Overview</a>
      </li>
    
      <li class="b-menu-item">
        <a href="http://try.tarantool.org" class="b-menu-item-url">Try</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/doc/" class="b-menu-item-url">Documentation</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/download.html" class="b-menu-item-url">Download</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/careers.html" class="b-menu-item-url">Careers</a>
      </li>
    
      <li class="b-menu-item">
        <a href="http://rocks.tarantool.org" class="b-menu-item-url">Rocks</a>
      </li>
    
  </ul>

        </nav>
      </div>
      <div class="b-menu__close">
        <!-- empty -->
      </div>
    </div>
    <div class="b-header-wrapper">
      <nav class="b-header_menu">
        
  <ul class="b-menu">
    
      <li class="b-menu-item">
        <a href="/" class="b-menu-item-url">Overview</a>
      </li>
    
      <li class="b-menu-item">
        <a href="http://try.tarantool.org" class="b-menu-item-url">Try</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/doc/" class="b-menu-item-url">Documentation</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/download.html" class="b-menu-item-url">Download</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/careers.html" class="b-menu-item-url">Careers</a>
      </li>
    
      <li class="b-menu-item">
        <a href="http://rocks.tarantool.org" class="b-menu-item-url">Rocks</a>
      </li>
    
  </ul>

      </nav>
    </div>
  </header>

      <!-- < HEADER -->

      <div class="b-content b-clearbox">
        
  <section class="b-lightgray_block b-documentation_top b-clearbox p-documentation_in">
    <div class="b-block-wrapper">
      <h2
      
        class="b-section-title b-ellipsis toggle-navigation"
      
        title="Module fiber">
          Module fiber
      </h2>
  <div class="b-doc-language_selector">
    <ul class="b-doc-language_selector-list">
    
      <li class="b-doc-language_selector-item">
      
        <a href="
  
    ../../reference_lua/fiber.html
  
"
           class="b-doc-language_selector-item-url p-active"> En </a>
      
      </li>
    
      <li class="b-doc-language_selector-item">
      
        <a href="
  
    ../ru/reference_lua/fiber.html
  
"
           class="b-doc-language_selector-item-url"> Ru </a>
      
      </li>
    
    </ul>
  </div>
</div>
  </section>
  
    <div class="b-cols_content b-clearbox">
      <div class="b-cols_content_left">
        
<form id="searchbox" role="search" class="search b-search" action="../search.html" method="get">
  <input class="b-search-text" name="q" type="text"/ placeholder="Search the manual">
  <input class="b-search-but" type="submit" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#an-application-server-together-with-a-database-manager">An Application Server Together With A Database Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#database-features">Database Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../book/index.html">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../book/intro.html">1. Preface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/intro.html#how-to-read-the-documentation">1.1. How to read the documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/intro.html#getting-in-touch-with-the-tarantool-community">1.2. Getting in touch with the Tarantool community</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/user_guide_getting_started.html">2. Getting started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/user_guide_getting_started.html#downloading-and-installing-a-binary-package">2.1. Downloading and installing a binary package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/user_guide_getting_started.html#starting-tarantool-and-making-your-first-database">2.2. Starting Tarantool and making your first database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/user_guide_getting_started.html#connecting-remotely">2.3. Connecting remotely</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/box/index.html">3. Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/box/index.html#document-data-model">3.1. Document data model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/box/index.html#space">3.1.1. Space</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/index.html#tuple-set">3.1.2. Tuple set</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/index.html#index">3.1.3. Index</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/index.html#data-types">3.1.4. Data types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/index.html#operations">3.1.5. Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/index.html#saving-to-disk">3.1.6. Saving to disk</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/index.html#data-manipulation">3.1.7. Data manipulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/index.html#index-operations">3.1.8. Index operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/index.html#the-box-library">3.1.9. The box library</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/box/index.html#submodules-of-the-box-library">3.2. Submodules of the box library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/box/index.html#the-two-storage-engines-memtx-and-vinyl">3.3. The two storage engines: memtx and vinyl</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/box/index.html#library-reference">3.4. Library reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_schema.html">3.4.1. Submodule <cite>box.schema</cite></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_schema.html#example">3.4.1.1. Example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_space.html">3.4.2. Submodule <cite>box.space</cite></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_space.html#example-use-box-space-functions-to-read-space-tuples">3.4.2.1. Example: use box.space functions to read _space tuples</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_space.html#example-use-box-space-functions-to-organize-a-space-tuple">3.4.2.2. Example: use box.space functions to organize a _space tuple</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_index.html">3.4.3. Submodule <cite>box.index</cite></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_index.html#example-showing-use-of-the-box-functions">3.4.3.1. Example showing use of the box functions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_index.html#example-showing-a-user-defined-iterator">3.4.3.2. Example showing a user-defined iterator</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_index.html#submodule-box-index-with-index-type-rtree-for-spatial-searches">3.4.3.3. Submodule <cite>box.index</cite> with index type = RTREE for spatial searches</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_session.html">3.4.4. Submodule <cite>box.session</cite></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_session.html#example">3.4.4.1. Example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_tuple.html">3.4.5. Submodule <cite>box.tuple</cite></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_tuple.html#example">3.4.5.1. Example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_introspection.html">3.4.6. Server introspection</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_introspection.html#lua-module.box.cfg">3.4.6.1. Submodule <cite>box.cfg</cite></a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_introspection.html#lua-module.box.info">3.4.6.2. Submodule <cite>box.info</cite></a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_introspection.html#lua-module.box.slab">3.4.6.3. Submodule <cite>box.slab</cite></a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/box_introspection.html#submodule-box-stat">3.4.6.4. Submodule <cite>box.stat</cite></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/admin.html">3.4.7. Administrative requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/atomic.html">3.4.8. Atomic execution</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/atomic.html#cooperative-multitasking-environment">3.4.8.1. Cooperative multitasking environment</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/atomic.html#example">3.4.8.2. Example</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/atomic.html#the-implicit-yield-rules">3.4.8.3. The Implicit Yield Rules</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/authentication.html">3.4.9. Access control</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/authentication.html#passwords">3.4.9.1. Passwords</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/authentication.html#users-and-the-user-space">3.4.9.2. Users and the _user space</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/authentication.html#privileges-and-the-priv-space">3.4.9.3. Privileges and the _priv space</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/authentication.html#functions-and-the-func-space">3.4.9.4. Functions and the _func space</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/authentication.html#box-session-and-security">3.4.9.5. <code class="docutils literal"><span class="pre">box.session</span></code> and security</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/authentication.html#roles">3.4.9.6. Roles</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/authentication.html#example-showing-a-role-within-a-role">3.4.9.7. Example showing a role within a role</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/triggers.html">3.4.10. Triggers</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/triggers.html#connection-triggers">3.4.10.1. Connection triggers</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../book/box/triggers.html#example">3.4.10.1.1. Example</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/triggers.html#authentication-triggers">3.4.10.2. Authentication triggers</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/triggers.html#lua-module.box.space">3.4.10.3. Replace triggers</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../book/box/triggers.html#id1">3.4.10.3.1. Example</a></li>
<li class="toctree-l6"><a class="reference internal" href="../book/box/triggers.html#another-example">3.4.10.3.2. Another Example</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/triggers.html#getting-a-list-of-triggers">3.4.10.4. Getting a list of triggers</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/limitations.html">3.4.11. Limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/vinyl_diff.html">3.4.12. Differences between memtx and vinyl storage engines</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/replication/index.html">4. Replication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#replication-architecture">4.1. Replication architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#setting-up-the-master">4.2. Setting up the master</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#setting-up-a-replica">4.3. Setting up a replica</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#recovering-from-a-degraded-state">4.4. Recovering from a degraded state</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#instructions-for-quick-startup-of-a-new-two-server-simple-cluster">4.5. Instructions for quick startup of a new two-server simple cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#monitoring-a-replica-s-actions">4.6. Monitoring a replica's actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#preventing-duplicate-actions">4.7. Preventing duplicate actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#master-master-replication">4.8. Master-master replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#all-the-what-if-questions">4.9. All the &quot;What If?&quot; questions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/replication/index.html#hands-on-replication-tutorial">4.10. Hands-on replication tutorial</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/configuration/index.html">5. Configuration reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/configuration/index.html#command-options">5.1. Command options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/configuration/index.html#uri">5.2. URI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/configuration/index.html#initialization-file">5.3. Initialization file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/configuration/index.html#configuration-parameters">5.4. Configuration parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/configuration/index.html#basic-parameters">5.4.1. Basic parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/configuration/index.html#configuring-the-storage">5.4.2. Configuring the storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/configuration/index.html#snapshot-daemon">5.4.3. Snapshot daemon</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/configuration/index.html#binary-logging-and-snapshots">5.4.4. Binary logging and snapshots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/configuration/index.html#replication">5.4.5. Replication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/configuration/index.html#networking">5.4.6. Networking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/configuration/index.html#logging">5.4.7. Logging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/configuration/index.html#local-hot-standby">5.5. Local hot standby</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/administration.html">6. Server administration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#server-signal-handling">6.1. Server signal handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#process-title">6.2. Process title</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#using-tarantool-as-a-client">6.3. Using tarantool as a client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#conventions-used-in-this-section">6.3.1. Conventions used in this section</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#options-when-starting-client-from-the-command-line">6.3.2. Options when starting client from the command line</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#tokens-requests-and-special-key-combinations">6.3.3. Tokens, requests, and special key combinations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#requests">6.3.4. Requests</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#utility-tarantoolctl">6.4. Utility tarantoolctl</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#configuration-for-tarantoolctl">6.4.1. Configuration for tarantoolctl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#commands-for-tarantoolctl">6.4.2. Commands for tarantoolctl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#typical-code-snippets-for-tarantoolctl">6.4.3. Typical code snippets for tarantoolctl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#a-detailed-example-for-tarantoolctl">6.4.4. A detailed example for tarantoolctl</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#utility-tarantoolctl-connect">6.5. Utility tarantoolctl connect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#admin-ports">6.6. Admin ports</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#system-specific-administration-notes">6.7. System-specific administration notes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#debian-gnu-linux-and-ubuntu">6.7.1. Debian GNU/Linux and Ubuntu</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#fedora-rhel-centos">6.7.2. Fedora, RHEL, CentOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#freebsd">6.7.3. FreeBSD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#mac-os-x">6.7.4. Mac OS X</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#notes-for-systemd-users">6.8. Notes for systemd users</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#instance-management">6.8.1. Instance management</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/administration.html#creating-instances">6.8.1.1. Creating instances</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/administration.html#starting-instances">6.8.1.2. Starting instances</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/administration.html#monitoring-instances">6.8.1.3. Monitoring instances</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/administration.html#attaching-to-instances">6.8.1.4. Attaching to instances</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/administration.html#checking-logs">6.8.1.5. Checking logs</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/administration.html#stopping-instances">6.8.1.6. Stopping instances</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#daemon-supervision">6.8.2. Daemon supervision</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#customizing-the-service-file">6.8.3. Customizing the service file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#debugging">6.8.4. Debugging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/administration.html#precautions">6.8.5. Precautions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#updating-tarantool-in-production">6.9. Updating Tarantool in production</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#backups">6.10. Backups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/administration.html#upgrades">6.11. Upgrades</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/connectors/index.html">7. Connectors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#protocol">7.1. Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#packet-example">7.2. Packet example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#setting-up-the-server-for-connector-examples">7.3. Setting up the server for connector examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#java">7.4. Java</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#go">7.5. Go</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#r">7.6. R</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#perl">7.7. Perl</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#php">7.8. PHP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#python">7.9. Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#c">7.10. C</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/connectors/index.html#example-1">7.10.1. Example 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/connectors/index.html#example-2">7.10.2. Example 2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/connectors/index.html#interpreting-function-return-values">7.11. Interpreting function return values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/modules.html">8. Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/modules.html#installing-an-existing-module">8.1. Installing an existing module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/modules.html#creating-a-new-lua-module-locally">8.2. Creating a new Lua module locally</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/modules.html#creating-a-new-c-c-module-locally">8.3. Creating a new C/C++ module locally</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/modules.html#creating-a-mixed-lua-c-module-locally">8.4. Creating a mixed Lua/C module locally</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/modules.html#tips-for-special-situations">8.5. Tips for special situations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/app/a_errcodes.html">9. Appendix A. List of error codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../book/app/b_internals.html">10. Appendix B. Internals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/app/b_internals.html#data-persistence-and-the-wal-file-format">10.1. Data persistence and the WAL file format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/app/b_internals.html#the-snapshot-file-format">10.2. The snapshot file format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/app/b_internals.html#the-recovery-process">10.3. The Recovery Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/app/b_internals.html#server-startup-with-replication">10.4. Server Startup With Replication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/app/c_lua_tutorial.html">11. Appendix C. Lua tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/app/c_lua_tutorial.html#insert-one-million-tuples-with-a-lua-stored-procedure">11.1. Insert one million tuples with a Lua stored procedure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/app/c_lua_tutorial.html#configure">11.1.1. Configure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/c_lua_tutorial.html#delimiter">11.1.2. Delimiter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/c_lua_tutorial.html#create-a-function-that-returns-a-string">11.1.3. Create a function that returns a string</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/c_lua_tutorial.html#create-a-function-that-calls-another-function-and-sets-a-variable">11.1.4. Create a function that calls another function and sets a variable</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/c_lua_tutorial.html#modify-the-function-so-it-returns-a-one-letter-random-string">11.1.5. Modify the function so it returns a one-letter random string</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/c_lua_tutorial.html#modify-the-function-so-it-returns-a-ten-letter-random-string">11.1.6. Modify the function so it returns a ten-letter random string</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/c_lua_tutorial.html#make-a-tuple-out-of-a-number-and-a-string">11.1.7. Make a tuple out of a number and a string</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/c_lua_tutorial.html#modify-main-function-to-insert-a-tuple-into-the-database">11.1.8. Modify main_function to insert a tuple into the database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/c_lua_tutorial.html#modify-main-function-to-insert-a-million-tuples-into-the-database">11.1.9. Modify main_function to insert a million tuples into the database</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/app/c_lua_tutorial.html#sum-a-json-field-for-all-tuples">11.2. Sum a JSON field for all tuples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/app/c_lua_tutorial.html#indexed-pattern-search">11.3. Indexed Pattern Search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/app/d_vinyl/index.html">12. Appendix D. Vinyl</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/app/d_vinyl/index.html#introduction">12.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../book/app/d_vinyl/index.html#under-the-hood">12.2. Under the hood</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/app/d_vinyl/index.html#inserting-the-first-200-000-keys">12.2.1. Inserting the first 200.000 keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/d_vinyl/index.html#inserting-the-next-300-000-keys">12.2.2. Inserting the next 300.000 keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/d_vinyl/index.html#inserting-the-next-200-000-keys">12.2.3. Inserting the next 200.000 keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/d_vinyl/index.html#inserting-the-last-300-000-keys">12.2.4. Inserting the last 300.000 keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/app/d_vinyl/index.html#reading-million-keys">12.2.5. Reading million keys</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/app/e_cookbook.html">13. Appendix E. Cookbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../book/app/f_c_tutorial.html">14. Appendix F. C tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/app/f_c_tutorial.html#c-stored-procedures">14.1. C stored procedures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../book/app/g_changes.html">15. Appendix G. Version-specific changes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/app/g_changes.html#changes-in-tarantool-version-1-7">15.1. Changes in Tarantool version 1.7</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Lua reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="box.html">Module <cite>box</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../book/box/box_schema.html">3.4.1. Submodule <cite>box.schema</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_schema.html#example">3.4.1.1. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/box/box_space.html">3.4.2. Submodule <cite>box.space</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_space.html#example-use-box-space-functions-to-read-space-tuples">3.4.2.1. Example: use box.space functions to read _space tuples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_space.html#example-use-box-space-functions-to-organize-a-space-tuple">3.4.2.2. Example: use box.space functions to organize a _space tuple</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/box/box_index.html">3.4.3. Submodule <cite>box.index</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_index.html#example-showing-use-of-the-box-functions">3.4.3.1. Example showing use of the box functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_index.html#example-showing-a-user-defined-iterator">3.4.3.2. Example showing a user-defined iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_index.html#submodule-box-index-with-index-type-rtree-for-spatial-searches">3.4.3.3. Submodule <cite>box.index</cite> with index type = RTREE for spatial searches</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/box/box_session.html">3.4.4. Submodule <cite>box.session</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_session.html#example">3.4.4.1. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/box/box_tuple.html">3.4.5. Submodule <cite>box.tuple</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_tuple.html#example">3.4.5.1. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/box/box_introspection.html">3.4.6. Server introspection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_introspection.html#lua-module.box.cfg">3.4.6.1. Submodule <cite>box.cfg</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_introspection.html#lua-module.box.info">3.4.6.2. Submodule <cite>box.info</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_introspection.html#lua-module.box.slab">3.4.6.3. Submodule <cite>box.slab</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/box_introspection.html#submodule-box-stat">3.4.6.4. Submodule <cite>box.stat</cite></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../book/box/triggers.html">3.4.10. Triggers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../book/box/triggers.html#connection-triggers">3.4.10.1. Connection triggers</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/triggers.html#example">3.4.10.1.1. Example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/triggers.html#authentication-triggers">3.4.10.2. Authentication triggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/triggers.html#lua-module.box.space">3.4.10.3. Replace triggers</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../book/box/triggers.html#id1">3.4.10.3.1. Example</a></li>
<li class="toctree-l5"><a class="reference internal" href="../book/box/triggers.html#another-example">3.4.10.3.2. Another Example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../book/box/triggers.html#getting-a-list-of-triggers">3.4.10.4. Getting a list of triggers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="clock.html">Module <cite>clock</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="console.html">Module <cite>console</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.html">Module <cite>crypto</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="crypto.html#incremental-methods-in-the-crypto-module">Incremental methods in the crypto module</a></li>
<li class="toctree-l3"><a class="reference internal" href="crypto.html#getting-the-same-results-from-digest-and-crypto-modules">Getting the same results from digest and crypto modules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="csv.html">Module <cite>csv</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="digest.html">Module <cite>digest</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="digest.html#incremental-methods-in-the-digest-module">Incremental methods in the digest module</a></li>
<li class="toctree-l3"><a class="reference internal" href="digest.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="box_error.html">Submodule <cite>box.error</cite></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Module <cite>fiber</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example-of-fiber-use">Example Of Fiber Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="fiber_ipc.html">Submodule <cite>fiber-ipc</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="fiber_ipc.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="fio.html">Module <cite>fio</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="fio.html#common-pathname-manipulations">Common pathname manipulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="fio.html#common-file-manipulations">Common file manipulations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="fun.html">Module <cite>fun</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="jit.html">Module <cite>jit</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="json.html">Module <cite>json</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="json.html#configuration-settings">Configuration settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="log.html">Module <cite>log</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="log.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="msgpack.html">Module <cite>msgpack</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="msgpack.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="net_box.html">Module <cite>net.box</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="net_box.html#example-showing-use-of-most-of-the-net-box-methods">Example showing use of most of the net.box methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="box_once.html">Function <cite>box.once</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="os.html">Module <cite>os</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="pickle.html">Module <cite>pickle</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="socket.html">Module <cite>socket</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="socket.html#example">Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="socket.html#use-of-a-tcp-socket-over-the-internet">Use of a TCP socket over the Internet</a></li>
<li class="toctree-l4"><a class="reference internal" href="socket.html#use-of-a-udp-socket-on-localhost">Use of a UDP socket on localhost</a></li>
<li class="toctree-l4"><a class="reference internal" href="socket.html#use-tcp-server-to-accept-file-contents-sent-with-socat">Use tcp_server to accept file contents sent with socat</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="strict.html">Module <cite>strict</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="tap.html">Module <cite>tap</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="tap.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tarantool.html">Module <cite>tarantool</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="uuid.html">Module <cite>uuid</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="uuid.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="yaml.html">Module <cite>yaml</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="yaml.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="other.html">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference_rock/index.html">Lua rocks reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference_rock/dbms.html">SQL DBMS Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference_rock/dbms.html#mysql-example">MySQL Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/dbms.html#installation">Installation</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../reference_rock/dbms.html#with-luarocks">With LuaRocks</a></li>
<li class="toctree-l5"><a class="reference internal" href="../reference_rock/dbms.html#with-github">With GitHub</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/dbms.html#connecting">Connecting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/dbms.html#how-to-ping">How to ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/dbms.html#executing-a-statement">Executing a statement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/dbms.html#closing-connection">Closing connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/dbms.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference_rock/dbms.html#postgresql-example">PostgreSQL Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/dbms.html#id1">Installation</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../reference_rock/dbms.html#id2">With LuaRocks</a></li>
<li class="toctree-l5"><a class="reference internal" href="../reference_rock/dbms.html#id3">With GitHub</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/dbms.html#id4">Connecting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/dbms.html#id5">How to ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/dbms.html#id6">Executing a statement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/dbms.html#id7">Closing connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/dbms.html#id8">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference_rock/expirationd.html">Module <cite>expirationd</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_rock/shard.html">Module <cite>shard</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference_rock/shard.html#example-shard-init-syntax-for-one-shard">Example: shard.init syntax for one shard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference_rock/shard.html#example-shard-init-syntax-for-three-shards">Example: shard.init syntax for three shards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference_rock/shard.html#example-shard-minimal-configuration">Example: Shard, Minimal Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference_rock/shard.html#example-shard-scaling-out">Example: Shard, Scaling Out</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference_rock/tdb.html">Module <cite>tdb</cite></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference_rock/tdb.html#debugger-commands">Debugger Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference_rock/tdb.html#example-session">Example Session</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference_capi/index.html">C API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/box.html">Module <cite>box</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/clock.html">Module <cite>clock</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/coio.html">Module <cite>coio</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/error.html">Module <cite>error</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/fiber.html">Module <cite>fiber</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/box_index.html">Module <cite>index</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/latch.html">Module <cite>latch</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/utils.html">Module <cite>lua/utils</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/say.html">Module <cite>say</cite> (logging)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/schema.html">Module <cite>schema</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/trivia.html">Module <cite>trivia/config</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/tuple.html">Module <cite>tuple</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_capi/txn.html">Module <cite>txn</cite></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/index.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/intro.html">What documentation there is</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/building_from_source.html">Building from source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/building_documentation.html">Building documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/developer_guidelines.html">Developer guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/developer_guidelines.html#how-to-work-on-a-bug">How to work on a bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/documentation_guidelines.html">Documentation guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#markup-issues">Markup issues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#wrapping-text">Wrapping text</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#formatting-code-snippets">Formatting code snippets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#using-separated-links">Using separated links</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#creating-labels-for-local-links">Creating labels for local links</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#making-comments">Making comments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#language-and-style-issues">Language and style issues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#us-vs-british-spelling">US vs British spelling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#examples-and-templates">Examples and templates</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#module-and-function">Module and function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/documentation_guidelines.html#module-class-and-method">Module, class and method</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/box_protocol.html">Tarantool's binary protocol</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/box_protocol.html#notion-in-diagrams">Notion in diagrams</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/box_protocol.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/box_protocol.html#greeting-packet">Greeting Packet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/box_protocol.html#unified-packet-structure">Unified packet structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/box_protocol.html#authentication">Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/box_protocol.html#requests">Requests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/box_protocol.html#response-packet-structure">Response packet structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/box_protocol.html#replication-packet-structure">Replication packet structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/box_protocol.html#xlog-snap">XLOG / SNAP</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/c_style_guide.html">C Style Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/c_style_guide.html#general-guidelines">General guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#commenting-style">Commenting style</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#header-files">Header files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#allocating-memory">Allocating memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#other">Other</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/c_style_guide.html#linux-kernel-coding-style">Linux kernel coding style</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-1-indentation">Chapter 1: Indentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-2-breaking-long-lines-and-strings">Chapter 2: Breaking long lines and strings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-3-placing-braces-and-spaces">Chapter 3: Placing Braces and Spaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-3-1-spaces">Chapter 3.1:  Spaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-4-naming">Chapter 4: Naming</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-5-typedefs">Chapter 5: Typedefs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-6-functions">Chapter 6: Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-7-centralized-exiting-of-functions">Chapter 7: Centralized exiting of functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-8-commenting">Chapter 8: Commenting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-9-you-ve-made-a-mess-of-it">Chapter 9: You've made a mess of it</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-10-kconfig-configuration-files">Chapter 10: Kconfig configuration files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-11-data-structures">Chapter 11: Data structures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-12-macros-enums-and-rtl">Chapter 12: Macros, Enums and RTL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-13-printing-kernel-messages">Chapter 13: Printing kernel messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-14-allocating-memory">Chapter 14: Allocating memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-15-the-inline-disease">Chapter 15: The inline disease</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-16-function-return-values-and-names">Chapter 16: Function return values and names</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-17-don-t-re-invent-the-kernel-macros">Chapter 17:  Don't re-invent the kernel macros</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#chapter-18-editor-modelines-and-other-cruft">Chapter 18:  Editor modelines and other cruft</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/c_style_guide.html#appendix-i-references">Appendix I: References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/python_style_guide.html">Python Style Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/python_style_guide.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/python_style_guide.html#a-foolish-consistency-is-the-hobgoblin-of-little-minds">A Foolish Consistency is the Hobgoblin of Little Minds</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/python_style_guide.html#code-lay-out">Code lay-out</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#indentation">Indentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#tabs-or-spaces">Tabs or Spaces?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#maximum-line-length">Maximum Line Length</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#blank-lines">Blank Lines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#encodings-pep-263">Encodings (PEP 263)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#imports">Imports</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/python_style_guide.html#whitespace-in-expressions-and-statements">Whitespace in Expressions and Statements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#pet-peeves">Pet Peeves</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#other-recommendations">Other Recommendations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/python_style_guide.html#comments">Comments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#block-comments">Block Comments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#inline-comments">Inline Comments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#documentation-strings">Documentation Strings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/python_style_guide.html#version-bookkeeping">Version Bookkeeping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/python_style_guide.html#naming-conventions">Naming Conventions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#descriptive-naming-styles">Descriptive: Naming Styles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev_guide/python_style_guide.html#prescriptive-naming-conventions">Prescriptive: Naming Conventions</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#names-to-avoid">Names to Avoid</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#package-and-module-names">Package and Module Names</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#class-names">Class Names</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#exception-names">Exception Names</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#global-variable-names">Global Variable Names</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#function-names">Function Names</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#function-and-method-arguments">Function and method arguments</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#method-names-and-instance-variables">Method Names and Instance Variables</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#constants">Constants</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dev_guide/python_style_guide.html#designing-for-inheritance">Designing for inheritance</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/python_style_guide.html#references">References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/python_style_guide.html#copyright">Copyright</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/release_management.html">Release management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dev_guide/release_management.html#how-to-make-a-minor-release">How to make a minor release</a></li>
</ul>
</li>
</ul>
</li>
</ul>

      </div>
      <div class="b-cols_content_right">
        <div class="b-cols_content_right-slot">
  <div class="b-page_header">
    <ul class="b-path-list">
      <li class="b-path-list-item">
        <a href="../index.html"
           class="b-path-list-item-url">
          Documentation
        </a>
      </li>
      
        <li class="b-path-list-item">
          <a href="index.html"
             class="b-path-list-item-url b-ellipsis">
            Lua reference
          </a>
        </li>
      
      
      <li class="b-path-list-item">
        <div title="Module <cite>fiber</cite>" class="b-path_current b-ellipsis">
          Module <cite>fiber</cite>
        </div>
      </li>
      
    </ul>
  </div>

  <div class="section" id="module-fiber">
<h1>Module <cite>fiber</cite><a class="headerlink" href="#module-fiber" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal"><span class="pre">fiber</span></code> module allows for creating, running and managing <em>fibers</em>.</p>
<p>A fiber is a set of instructions which are executed with cooperative
multitasking. Fibers managed by the fiber module are associated with
a user-supplied function called the <em>fiber function</em>.
A fiber has three possible states: <strong>running</strong>, <strong>suspended</strong> or <strong>dead</strong>.
When a fiber is created with <a class="reference internal" href="#fiber-create"><span class="std std-ref">fiber.create()</span></a>, it is running.
When a fiber yields control with <a class="reference internal" href="#fiber-sleep"><span class="std std-ref">fiber.sleep()</span></a>, it is suspended.
When a fiber ends (because the fiber function ends), it is dead.</p>
<p>All fibers are part of the fiber registry. This registry can be searched
with <a class="reference internal" href="#fiber-find"><span class="std std-ref">fiber.find()</span></a> - via fiber id (fid), which is a numeric
identifier.</p>
<p>A runaway fiber can be stopped with <a class="reference internal" href="#fiber-object-cancel"><span class="std std-ref">fiber_object.cancel</span></a>.
However, <a class="reference internal" href="#fiber-object-cancel"><span class="std std-ref">fiber_object.cancel</span></a> is advisory — it works
only if the runaway fiber calls <a class="reference internal" href="#fiber-testcancel"><span class="std std-ref">fiber.testcancel()</span></a>
occasionally. Most <code class="docutils literal"><span class="pre">box.*</span></code> functions, such as
<a class="reference internal" href="../book/box/box_space.html#box-space-delete"><span class="std std-ref">box.space...delete()</span></a> or
<a class="reference internal" href="../book/box/box_space.html#box-space-update"><span class="std std-ref">box.space...update()</span></a>, do call
<a class="reference internal" href="#fiber-testcancel"><span class="std std-ref">fiber.testcancel()</span></a> but
<a class="reference internal" href="../book/box/box_space.html#box-space-select"><span class="std std-ref">box.space...select{}</span></a> does not. In practice, a runaway
fiber can only become unresponsive if it does many computations and does not
check whether it has been cancelled.</p>
<p>The other potential problem comes from fibers which never get scheduled, because
they are not subscribed to any events, or because no relevant events occur. Such
morphing fibers can be killed with <a class="reference internal" href="#fiber-kill"><span class="std std-ref">fiber.kill()</span></a> at any time,
since <a class="reference internal" href="#fiber-kill"><span class="std std-ref">fiber.kill()</span></a> sends an asynchronous wakeup event to the
fiber, and <a class="reference internal" href="#fiber-testcancel"><span class="std std-ref">fiber.testcancel()</span></a> is checked whenever such
a wakeup event occurs.</p>
<p>Like all Lua objects, dead fibers are garbage collected. The garbage collector
frees pool allocator memory owned by the fiber, resets all fiber data, and
returns the fiber (now called a fiber carcass) to the fiber pool. The carcass
can be reused when another fiber is created.</p>
<p>A fiber has all the features of a Lua <a class="reference external" href="http://www.lua.org/pil/contents.html#9">coroutine</a> and all the programming
concepts that apply for Lua coroutines will apply for fibers as well. However,
Tarantool has made some enhancements for fibers and has used fibers internally.
So, although use of coroutines is possible and supported, use of fibers is
recommended.</p>
<span class="target" id="lua-module.fiber"></span><span class="target" id="fiber-create"></span><dl class="function">
<dt id="lua-function.fiber.create">
<em class="property"> </em><code class="descclassname">fiber.</code><code class="descname">create</code><big>(</big><em>function</em><span class="optional">[</span>, <em>function-arguments</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#lua-function.fiber.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create and start a fiber. The fiber is created and begins to run immediately.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>function</strong> -- the function to be associated with the fiber</li>
<li><strong>function-arguments</strong> -- what will be passed to function</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return:</th><td class="field-body"><p class="first">created fiber object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Rtype:</th><td class="field-body"><p class="first last">userdata</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">fiber&#39;</span><span class="p">)</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="k">function</span> <span class="nf">function_name</span><span class="p">()</span>
<span class="gp">         &gt; </span>  <span class="n">fiber</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="gp">         &gt; </span><span class="k">end</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">fiber_object</span> <span class="o">=</span> <span class="n">fiber</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">function_name</span><span class="p">)</span>
<span class="nn">---</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="fiber-self"></span><dl class="function">
<dt id="lua-function.fiber.self">
<em class="property"> </em><code class="descclassname">fiber.</code><code class="descname">self</code><big>(</big><big>)</big><a class="headerlink" href="#lua-function.fiber.self" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">fiber object for the currently scheduled fiber.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">userdata</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber</span><span class="p">.</span><span class="n">self</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">status</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">running</span>
  <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">interactive</span>
  <span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">101</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="fiber-find"></span><dl class="function">
<dt id="lua-function.fiber.find">
<em class="property"> </em><code class="descclassname">fiber.</code><code class="descname">find</code><big>(</big><em>id</em><big>)</big><a class="headerlink" href="#lua-function.fiber.find" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong> -- numeric identifier of the fiber.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return:</th><td class="field-body"><p class="first">fiber object for the specified fiber.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Rtype:</th><td class="field-body"><p class="first last">userdata</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">status</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">running</span>
  <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">interactive</span>
  <span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">101</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="fiber-sleep"></span><dl class="function">
<dt id="lua-function.fiber.sleep">
<em class="property"> </em><code class="descclassname">fiber.</code><code class="descname">sleep</code><big>(</big><em>time</em><big>)</big><a class="headerlink" href="#lua-function.fiber.sleep" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield control to the transaction processor thread and sleep for the specified number
of seconds. Only the current fiber can be made to sleep.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>time</strong> -- number of seconds to sleep.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="nn">---</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="fiber-yield"></span><dl class="function">
<dt id="lua-function.fiber.yield">
<em class="property"> </em><code class="descclassname">fiber.</code><code class="descname">yield</code><big>(</big><big>)</big><a class="headerlink" href="#lua-function.fiber.yield" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield control to the scheduler. Equivalent to <a class="reference internal" href="#fiber-sleep"><span class="std std-ref">fiber.sleep(0)</span></a>.</p>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber</span><span class="p">.</span><span class="n">yield</span><span class="p">()</span>
<span class="nn">---</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="fiber-status"></span><dl class="function">
<dt id="lua-function.fiber.status">
<em class="property"> </em><code class="descclassname">fiber.</code><code class="descname">status</code><big>(</big><big>)</big><a class="headerlink" href="#lua-function.fiber.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the status of the current fiber.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">the status of <code class="docutils literal"><span class="pre">fiber</span></code>. One of: “dead”, “suspended”, or “running”.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber</span><span class="p">.</span><span class="n">status</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">running</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="fiber-info"></span><dl class="function">
<dt id="lua-function.fiber.info">
<em class="property"> </em><code class="descclassname">fiber.</code><code class="descname">info</code><big>(</big><big>)</big><a class="headerlink" href="#lua-function.fiber.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Return information about all fibers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">number of context switches, backtrace, id, total memory, used
memory, name for each fiber.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">table</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber</span><span class="p">.</span><span class="n">info</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">101</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">csw</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">7</span>
    <span class="l l-Scalar l-Scalar-Plain">backtrace</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[]</span>
    <span class="l l-Scalar l-Scalar-Plain">fid</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">101</span>
    <span class="l l-Scalar l-Scalar-Plain">memory</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">total</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">65776</span>
      <span class="l l-Scalar l-Scalar-Plain">used</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
    <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">interactive</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="fiber-kill"></span><dl class="function">
<dt id="lua-function.fiber.kill">
<em class="property"> </em><code class="descclassname">fiber.</code><code class="descname">kill</code><big>(</big><em>id</em><big>)</big><a class="headerlink" href="#lua-function.fiber.kill" title="Permalink to this definition">¶</a></dt>
<dd><p>Locate a fiber by its numeric id and cancel it. In other words,
<a class="reference internal" href="#fiber-kill"><span class="std std-ref">fiber.kill()</span></a> combines <a class="reference internal" href="#fiber-find"><span class="std std-ref">fiber.find()</span></a> and
<a class="reference internal" href="#fiber-object-cancel"><span class="std std-ref">fiber_object:cancel()</span></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong> -- the id of the fiber to be cancelled.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Exception:</th><td class="field-body"><p class="first last">the specified fiber does not exist or cancel is not permitted.</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber</span><span class="p">.</span><span class="n">kill</span><span class="p">(</span><span class="n">fiber</span><span class="p">.</span><span class="n">id</span><span class="p">())</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">error</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">fiber is cancelled</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="fiber-testcancel"></span><dl class="function">
<dt id="lua-function.fiber.testcancel">
<em class="property"> </em><code class="descclassname">fiber.</code><code class="descname">testcancel</code><big>(</big><big>)</big><a class="headerlink" href="#lua-function.fiber.testcancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the current fiber has been cancelled
and throw an exception if this is the case.</p>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber</span><span class="p">.</span><span class="n">testcancel</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">error</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">fiber is cancelled</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="lua-object.fiber.fiber_object">
<em class="property">object </em><code class="descname">fiber_object</code><a class="headerlink" href="#lua-object.fiber.fiber_object" title="Permalink to this definition">¶</a></dt>
<dd><span class="target" id="fiber-object-id"></span><dl class="method">
<dt id="lua-function.fiber_object.id">
<em class="property"> </em><code class="descclassname">fiber_object:</code><code class="descname">id</code><big>(</big><big>)</big><a class="headerlink" href="#lua-function.fiber_object.id" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>self</strong> -- fiber object, for example the fiber object returned
by <a class="reference internal" href="#fiber-create"><span class="std std-ref">fiber.create</span></a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return:</th><td class="field-body"><p class="first">id of the fiber.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Rtype:</th><td class="field-body"><p class="first last">number</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber_object</span> <span class="o">=</span> <span class="n">fiber</span><span class="p">.</span><span class="n">self</span><span class="p">()</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">fiber_object</span><span class="p">:</span><span class="n">id</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">101</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="fiber-object-name-get"></span><dl class="method">
<dt id="lua-function.fiber_object.name">
<em class="property"> </em><code class="descclassname">fiber_object:</code><code class="descname">name</code><big>(</big><big>)</big><a class="headerlink" href="#lua-function.fiber_object.name" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>self</strong> -- fiber object, for example the fiber object returned
by <a class="reference internal" href="#fiber-create"><span class="std std-ref">fiber.create</span></a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return:</th><td class="field-body"><p class="first">name of the fiber.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Rtype:</th><td class="field-body"><p class="first last">string</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber</span><span class="p">.</span><span class="n">self</span><span class="p">():</span><span class="n">name</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">interactive</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="fiber-object-name-set"></span><dl class="method">
<dt>
<em class="property"> </em><code class="descclassname">fiber_object:</code><code class="descname">name</code><big>(</big><em>name</em><big>)</big></dt>
<dd><p>Change the fiber name. By default the Tarantool server's
interactive-mode fiber is named 'interactive' and new
fibers created due to <a class="reference internal" href="#fiber-create"><span class="std std-ref">fiber.create</span></a> are named 'lua'.
Giving fibers distinct names makes it easier to
distinguish them when using <a class="reference internal" href="#fiber-info"><span class="std std-ref">fiber.info</span></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>self</strong> -- fiber object, for example the fiber
object returned by <a class="reference internal" href="#fiber-create"><span class="std std-ref">fiber.create</span></a></li>
<li><strong>name</strong> (<em>string</em>) -- the new name of the fiber.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return:</th><td class="field-body"><p class="first last">nil</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber</span><span class="p">.</span><span class="n">self</span><span class="p">():</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">non-interactive&#39;</span><span class="p">)</span>
<span class="nn">---</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="fiber-object-status"></span><dl class="method">
<dt id="lua-function.fiber_object.status">
<em class="property"> </em><code class="descclassname">fiber_object:</code><code class="descname">status</code><big>(</big><big>)</big><a class="headerlink" href="#lua-function.fiber_object.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the status of the specified fiber.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>self</strong> -- fiber object, for example the fiber object returned by
<a class="reference internal" href="#fiber-create"><span class="std std-ref">fiber.create</span></a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return:</th><td class="field-body"><p class="first">the status of fiber. One of: “dead”, “suspended”, or “running”.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Rtype:</th><td class="field-body"><p class="first last">string</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber</span><span class="p">.</span><span class="n">self</span><span class="p">():</span><span class="n">status</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">running</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="fiber-object-cancel"></span><dl class="method">
<dt id="lua-function.fiber_object.cancel">
<em class="property"> </em><code class="descclassname">fiber_object:</code><code class="descname">cancel</code><big>(</big><big>)</big><a class="headerlink" href="#lua-function.fiber_object.cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel a fiber. Running and suspended fibers can be cancelled.
After a fiber has been cancelled, attempts to operate on it will
cause errors, for example <a class="reference internal" href="#fiber-object-id"><span class="std std-ref">fiber_object:id()</span></a>
will cause <code class="docutils literal"><span class="pre">error:</span> <span class="pre">the</span> <span class="pre">fiber</span> <span class="pre">is</span> <span class="pre">dead</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>self</strong> -- fiber object, for example the fiber
object returned by <a class="reference internal" href="#fiber-create"><span class="std std-ref">fiber.create</span></a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return:</th><td class="field-body"><p class="first last">nil</p>
</td>
</tr>
</tbody>
</table>
<p>Possible errors: cancel is not permitted for the specified fiber object.</p>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber</span><span class="p">.</span><span class="n">self</span><span class="p">():</span><span class="n">cancel</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">error</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">fiber is cancelled</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="fiber-object-storage"></span><dl class="data">
<dt id="lua-data.fiber_object.storage">
<em class="property"> </em><code class="descclassname">fiber_object.</code><code class="descname">storage</code><a class="headerlink" href="#lua-data.fiber_object.storage" title="Permalink to this definition">¶</a></dt>
<dd><p>Local storage within the fiber. The storage can contain any number of
named values, subject to memory limitations. Naming may be done with
<code class="samp docutils literal"><em><span class="pre">fiber_object</span></em><span class="pre">.storage.</span><em><span class="pre">name</span></em></code> or <code class="samp docutils literal"><span class="pre">fiber_object}.storage['</span><em><span class="pre">name</span></em><span class="pre">'].</span></code>
or with a number <code class="samp docutils literal"><em><span class="pre">fiber_object</span></em><span class="pre">.storage[</span><em><span class="pre">number</span></em><span class="pre">]</span></code>.
Values may be either numbers or strings. The storage is garbage-collected
when <code class="samp docutils literal"><em><span class="pre">fiber_object</span></em><span class="pre">:cancel()</span></code> happens.</p>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">fiber&#39;</span><span class="p">)</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="k">function</span> <span class="nf">f</span> <span class="p">()</span> <span class="n">fiber</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span> <span class="k">end</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">fiber_function</span> <span class="o">=</span> <span class="n">fiber</span><span class="p">:</span><span class="n">create</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">error</span><span class="p p-Indicator">:</span> <span class="s">&#39;[string</span><span class="nv"> </span><span class="s">&quot;fiber_function</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">fiber:create(f)&quot;]:1:</span><span class="nv"> </span><span class="s">fiber.create(function,</span><span class="nv"> </span><span class="s">...):</span>
    <span class="s">bad</span><span class="nv"> </span><span class="s">arguments&#39;</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">fiber_function</span> <span class="o">=</span> <span class="n">fiber</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">fiber_function</span><span class="p">.</span><span class="n">storage</span><span class="p">.</span><span class="n">str1</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">string&#39;</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">fiber_function</span><span class="p">.</span><span class="n">storage</span><span class="p">[</span><span class="s1">&#39;</span><span class="s">str1&#39;</span><span class="p">]</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">fiber_function</span><span class="p">:</span><span class="n">cancel</span><span class="p">()</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">fiber_function</span><span class="p">.</span><span class="n">storage</span><span class="p">[</span><span class="s1">&#39;</span><span class="s">str1&#39;</span><span class="p">]</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">error</span><span class="p p-Indicator">:</span> <span class="s">&#39;[string</span><span class="nv"> </span><span class="s">&quot;return</span><span class="nv"> </span><span class="s">fiber_function.storage[</span><span class="se">&#39;&#39;</span><span class="s">str1</span><span class="se">&#39;&#39;</span><span class="s">]&quot;]:1:</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">fiber</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">dead&#39;</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="../book/box/box_session.html#box-session-storage"><span class="std std-ref">box.session.storage</span></a>.</p>
</dd></dl>

</dd></dl>

<span class="target" id="fiber-time"></span><dl class="function">
<dt id="lua-function.fiber.time">
<em class="property"> </em><code class="descclassname">fiber.</code><code class="descname">time</code><big>(</big><big>)</big><a class="headerlink" href="#lua-function.fiber.time" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">current system time (in seconds since the epoch) as a Lua
number. The time is taken from the event loop clock,
which makes this call very cheap, but still useful for
constructing artificial tuple keys.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">num</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<blockquote>
<div><div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber</span><span class="p">.</span><span class="n">time</span><span class="p">(),</span> <span class="n">fiber</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">1448466279.2415</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">1448466279.2415</span>
<span class="nn">...</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<span class="target" id="fiber-time64"></span><dl class="function">
<dt id="lua-function.fiber.time64">
<em class="property"> </em><code class="descclassname">fiber.</code><code class="descname">time64</code><big>(</big><big>)</big><a class="headerlink" href="#lua-function.fiber.time64" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">current system time (in microseconds since the epoch)
as a 64-bit integer. The time is taken from the event
loop clock.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">num</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber</span><span class="p">.</span><span class="n">time</span><span class="p">(),</span> <span class="n">fiber</span><span class="p">.</span><span class="n">time64</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">1448466351.2708</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">1448466351270762</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<div class="section" id="example-of-fiber-use">
<h2>Example Of Fiber Use<a class="headerlink" href="#example-of-fiber-use" title="Permalink to this headline">¶</a></h2>
<p>Make the function which will be associated with the fiber. This function
contains an infinite loop (<code class="docutils literal"><span class="pre">while</span> <span class="pre">0</span> <span class="pre">==</span> <span class="pre">0</span></code> is always true). Each iteration
of the loop adds 1 to a global variable named gvar, then goes to sleep for
2 seconds. The sleep causes an implicit <a class="reference internal" href="#fiber-yield"><span class="std std-ref">fiber.yield()</span></a>.</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">fiber&#39;</span><span class="p">)</span>
<span class="gp">tarantool&gt; </span><span class="k">function</span> <span class="nf">function_x</span><span class="p">()</span>
<span class="gp">         &gt; </span>  <span class="n">gvar</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">         &gt; </span>  <span class="k">while</span> <span class="mi">0</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">do</span>
<span class="gp">         &gt; </span>    <span class="n">gvar</span> <span class="o">=</span> <span class="n">gvar</span> <span class="o">+</span> <span class="mi">1</span>
<span class="gp">         &gt; </span>    <span class="n">fiber</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">         &gt; </span>  <span class="k">end</span>
<span class="gp">         &gt; </span><span class="k">end</span>
<span class="nn">---</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>Make a fiber, associate function_x with the fiber, and start function_x.
It will immediately &quot;detach&quot; so it will be running independently of the caller.</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">gvar</span> <span class="o">=</span> <span class="mi">0</span>

<span class="gp">tarantool&gt; </span><span class="n">fiber_of_x</span> <span class="o">=</span> <span class="n">fiber</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">function_x</span><span class="p">)</span>
<span class="nn">---</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>Get the id of the fiber (fid), to be used in later displays.</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fid</span> <span class="o">=</span> <span class="n">fiber_of_x</span><span class="p">:</span><span class="n">id</span><span class="p">()</span>
<span class="nn">---</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>Pause for a while, while the detached function runs. Then ... Display the fiber
id, the fiber status, and gvar (gvar will have gone up a bit depending how long
the pause lasted). The status is suspended because the fiber spends almost all
its time sleeping or yielding.</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">#&#39;</span><span class="p">,</span> <span class="n">fid</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">. &#39;</span><span class="p">,</span> <span class="n">fiber_of_x</span><span class="p">:</span><span class="n">status</span><span class="p">(),</span> <span class="s1">&#39;</span><span class="s">. gvar=&#39;</span><span class="p">,</span> <span class="n">gvar</span><span class="p">)</span>
<span class="go"># 102 .  suspended . gvar= 399</span>
<span class="nn">---</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>Pause for a while, while the detached function runs. Then ... Cancel the fiber.
Then, once again ... Display the fiber id, the fiber status, and gvar (gvar
will have gone up a bit more depending how long the pause lasted). This time
the status is dead because the cancel worked.</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">fiber_of_x</span><span class="p">:</span><span class="n">cancel</span><span class="p">()</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">#&#39;</span><span class="p">,</span> <span class="n">fid</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">. &#39;</span><span class="p">,</span> <span class="n">fiber_of_x</span><span class="p">:</span><span class="n">status</span><span class="p">(),</span> <span class="s1">&#39;</span><span class="s">. gvar=&#39;</span><span class="p">,</span> <span class="n">gvar</span><span class="p">)</span>
<span class="go"># 102 .  dead . gvar= 421</span>
<span class="nn">---</span>
<span class="nn">...</span>
</pre></div>
</div>
</div>
</div>


          
          
  <div id="disqus_thread"></div>
  <script>
    // DON'T EDIT
    (function() {
        var d = document, s = d.createElement('script');
        s.src = '//tarantooldb.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>
    Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript" rel="nofollow">
      comments powered by Disqus.
    </a>
  </noscript>

          
  
    
      <div class="b-page_over-tail">
    
    
      <div class="b-page_over-prev">
        <a href="box_error.html"
           class="b-prev b-ellipsis"
           title="Submodule &lt;cite&gt;box.error&lt;/cite&gt;">Submodule <cite>box.error</cite></a>
      </div>
    
    <div class="b-page_over-lang">
      <ul class="b-page_over-lang-list">
        <li class="b-page_over-lang-item">
          <a href="../_sources/reference_lua/fiber.txt"
             class="b-page_over-lang-url"> Source </a>
        </li>
      </ul>
    </div>
    
      <div class="b-page_over-next">
        <a href="fiber_ipc.html"
           class="b-next b-ellipsis"
           title="Submodule &lt;cite&gt;fiber-ipc&lt;/cite&gt;">Submodule <cite>fiber-ipc</cite></a>
      </div>
    
    </div>
  
</div>
      </div>
    </div>
  

      </div>
    </div>

  <!-- FOOTER > -->
  
<footer class="b-footer">
  <div class="b-footer-wrapper">
    <nav class="b-footer_menu">
      
  <ul class="b-menu">
    
      <li class="b-menu-item">
        <a href="/" class="b-menu-item-url">Overview</a>
      </li>
    
      <li class="b-menu-item">
        <a href="http://try.tarantool.org" class="b-menu-item-url">Try</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/doc/" class="b-menu-item-url">Documentation</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/download.html" class="b-menu-item-url">Download</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/careers.html" class="b-menu-item-url">Careers</a>
      </li>
    
      <li class="b-menu-item">
        <a href="http://rocks.tarantool.org" class="b-menu-item-url">Rocks</a>
      </li>
    
  </ul>

      <div class="b-footer-other">
        <a href="http://15.tarantool.org">1.5 web site and downloads</a>
      </div>
    </nav>
  </div>
</footer>

  <!-- < FOOTER -->
  </body>
</html>

